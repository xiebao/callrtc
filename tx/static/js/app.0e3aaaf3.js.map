{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?4a62","webpack:///./src/assets/ic_video_photo.png","webpack:///./src/components/HelloWorld.vue?b5eb","webpack:///./src/assets/play_video_record.png","webpack:///./src/App.vue?9944","webpack:///./src/components/HelloWorld.vue?a8b2","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?c3c6","webpack:///./src/components/HelloWorld.vue","webpack:///./src/components/Start_call.vue?3932","webpack:///src/components/Start_call.vue","webpack:///./src/components/Start_call.vue?3c29","webpack:///./src/components/Start_call.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue?315a","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/assets/hangup.png","webpack:///./src/assets/ic_video_unlock_land.png","webpack:///./src/assets/xcxlogo.jpg","webpack:///./src/assets/ic_video_stop.png","webpack:///./src/assets/ic_video_record.png","webpack:///./src/components/Start_call.vue?6708","webpack:///./src/assets/ic_video_stop_land.png","webpack:///./src/assets/logo.png","webpack:///./src/assets/ic_video_unlock.png"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","_v","_s","$store","state","actype","callinfo","roomtel","doorname","staticStyle","initstate","ref","domProps","on","$event","hangup","component","imgsrclogo","isclose","_e","directives","rawName","expression","show","target","composing","NUM","callmanege","isShowSelect","class","active","change","msDown","msUp","del","comfirm","unitModel","_l","item","index","stopPropagation","select","realName","encryptPhone","isShowdiv","Vue","use","Vuex","store","Store","accesstoken","deviceId","ability","login","statename","meid","peerid","server","phone","remoteurl","config","productionTip","el","h","App","$mount"],"mappings":"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CA,yBACA,qBACA,qBACA,qBACA,yBACA,gBACA,YACA,SACA,QACA,sBACA,mBACA,YACA,uBACA,mBACA,iBACA,gBACA,qBACA,4BACA,UACA,QACA,aACA,cACA,aACA,SACA,OACA,SACA,UACA,eACA,YACA,YACA,sBACA,sBACA,uBACA,mBACA,2BACA,eACA,aACA,wDAKA,UAGA,0CAEA,oCACA,YAIA,cAEA,8BAEA,oCACA,YACA,YAKA,uCACA,UACA,kBAGA,uBACA,qBACA,sBACA,mCACA,UAEA,mBACA,mBAEA,wBAjBA,mBAXA,eA+BA,UACA,wCACA,oCACA,qCACA,uBACA,4BAEA,sCACA,UAEA,kBAGA,iCAOA,GANA,UACA,8DACA,sDACA,uCACA,+CAEA,2BACA,qBAIA,aACA,2DACA,YACA,2DACA,SACA,CACA,qBACA,WACA,2CAEA,sCAGA,aACA,2DAaA,mBACA,wDACA,yBACA,0BAEA,iEACA,2DACA,kCACA,iBACA,4BAEA,iEACA,6DACA,uEAEA,gCACA,2CACA,iCACA,wEACA,0BACA,uBACA,WACA,WACA,yBACA,qBACA,8BACA,GACA,EACA,UACA,kBACA,8CAEA,UACA,kBACA,mDAKA,IAGA,gCACA,6CAEA,4CAIA,WACA,qBACA,iBAKA,UACA,YACA,qCAGA,YACA,qBACA,oBACA,qBAGA,8CACA,eAGA,SACA,oBAGA,IAFA,0CACA,eACA,oBACA,sBACA,WACA,YAGA,UAGA,SACA,sBAEA,2BACA,2BAEA,2BACA,6BAEA,oBAEA,sBACA,mBACA,kBACA,aAEA,oBACA,oCACA,WAGA,wBACA,kBAGA,qBACA,qBACA,oBAOA,eACA,OACA,aACA,uBACA,kBACA,kBACA,kBACA,MAEA,mBACA,GACA,cACA,kBACA,6CACA,SACA,kCACA,kCACA,qCAGA,OACA,WAEA,SACA,sCAGA,UACA,kBAMA,cACA,OACA,wCACA,uCACA,8BACA,0BAEA,eACA,wBACA,GACA,cACA,MACA,6CACA,SACA,kCACA,kCACA,qCAGA,OACA,WAEA,SAEA,GADA,0CACA,qBACA,WACA,uCACA,+BACA,iCACA,OACA,8BACA,IAEA,wCAEA,MACA,iBACA,gCACA,YACA,uBAEA,UAGA,wBAIA,UACA,kBAOA,gBACA,2BACA,qDAMA,eACA,qBACA,eACA,kBACA,wBAEA,mBACA,uBAGA,uBAGA,gBAEA,gCACA,uBACA,cACA,qBAEA,qBAEA,wBACA,4BACA,2BAGA,WACA,0DACA,wCACA,wBACA,YACA,2EACA,SAMA,gBAEA,gCACA,qBACA,aACA,qBAEA,qBAEA,WACA,wDACA,wCACA,uBACA,YACA,2EACA,SAMA,cACA,WACA,+BACA,6DACA,2BAEA,iBACA,4BACA,+CACA,oCAEA,sCAEA,iDACA,sCACA,gCAEA,gCACA,8BACA,uBACA,SACA,yCAIA,0CACA,iBACA,SACA,GACA,EACA,OACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,EACA,EACA,MAEA,mBACA,yBAGA,8BAIA,aAEA,kBACA,8BACA,2BAGA,0BACA,mBAGA,cACA,yBACA,wCACA,yCACA,qBACA,oCACA,+BACA,YACA,yEACA,KAIA,wBACA,wCAEA,aACA,wCACA,qCACA,8BACA,qBAIA,aACA,+DAIA,CACA,qBACA,iBACA,2CAEA,4CAGA,aACA,2DACA,mDAIA,aACA,2DACA,YACA,WACA,gDACA,MAGA,oBAEA,aACA,8BACA,qCAEA,aACA,WACA,8CACA,cACA,qCACA,kBACA,+CACA,+BACA,gBAEA,iBACA,yBAEA,iBACA,cACA,gBACA,mBACA,MACA,sBACA,iBACA,sBACA,YACA,gBAKA,eACA,gBAEA,4BACA,kBACA,kBACA,gBAEA,+BACA,gBAGA,mBAEA,6DAGA,eAEA,gBACA,iEAGA,+BAGA,2CACA,8BACA,SAEA,gCACA,iBACA,uBAKA,EAFA,2BACA,EACA,iDAEA,gDAGA,EACA,qCAEA,oCAIA,wCAMA,qBACA,qBACA,mBAEA,8BAEA,+CACA,yCACA,2CACA,2CAEA,kBACA,WACA,0BACA,2CACA,gDACA,oBAEA,gBACA,4CACA,mBAGA,MAIA,oBAEA,0BACA,8BACA,kBACA,uBAIA,sBAEA,2BAKA,OAJA,YACA,wDAGA,aACA,YACA,wBACA,MACA,cACA,0BACA,MACA,cACA,oCAEA,2BACA,MACA,qBACA,6BACA,MACA,4BACA,oBACA,iCACA,cACA,MACA,oBACA,+BACA,MACA,mBACA,iBACA,+BACA,MACA,sBACA,iCACA,MACA,YACA,MACA,QACA,qCACA,QAGA,iBACA,iDACA,sBAGA,kBAEA,0BACA,8BACA,kBACA,uBAEA,kBACA,UACA,aACA,yCAEA,aACA,uCAEA,aACA,yCAEA,eACA,2CAEA,gBACA,kCAEA,WACA,2BAEA,QACA,WAGA,uBAEA,+CAGA,+BACA,2CAGA,8BACA,gBACA,QACA,SACA,oCAEA,iBACA,sBACA,QACA,SACA,iCAEA,qDACA,8BAEA,kDACA,gCACA,qDAEA,4BACA,0BACA,uDAGA,UAEA,mBACA,wBACA,MACA,yBACA,iBACA,yBACA,eACA,mBAIA,oBACA,8BACA,mDACA,kCACA,qBAIA,gBACA,kEAEA,uCAGA,iBACA,sBACA,qBACA,uBACA,mBACA,2BACA,MACA,yBACA,iBACA,YACA,eACA,eACA,eAKA,0BAKA,wDAGA,0CACA,gCACA,2BAGA,sBACA,kCAEA,aACA,uBAGA,uBACA,sCACA,8BACA,mCACA,mBACA,uBAEA,gCAGA,gBACA,mCACA,uCACA,4BAEA,0BACA,kBACA,oBAKA,mCACA,YACA,uCACA,8BAEA,8DAEA,YACA,wCACA,cAEA,8CAGA,kDACA,wCACA,aAEA,YACA,sCACA,yBACA,gBACA,mBAIA,2CAGA,OAEA,oBACA,iBACA,aACA,SACA,6BACA,WAEA,4BACA,cAEA,4BACA,cAKA,YACA,4BACA,EACA,UACA,EACA,eACA,IAGA,qBACA,kDAEA,mBACA,mBACA,MACA,yBACA,iBACA,yBACA,eACA,mBAIA,cACA,qCACA,WAEA,2BACA,2BACA,+BACA,gCACA,kCACA,gCACA,yBAEA,8BACA,YACA,yCACA,sCAEA,+CACA,sBAEA,+CAEA,oCAEA,8BAEA,gBACA,0BACA,6CACA,mBAGA,OAGA,qBACA,iCACA,oBACA,sDAGA,gBACA,uCACA,8BACA,0CACA,uCACA,mCACA,kDACA,qDACA,4BAEA,uBACA,qBAEA,wBACA,kBAEA,uBACA,WACA,+CACA,MACA,8DACA,SACA,cACA,kBAEA,+DACA,wBACA,2BACA,+DAEA,2BACA,8BACA,wBAEA,wCAEA,kDAEA,YACA,2DAIA,qBACA,WACA,oBACA,6CAEA,kCACA,0BAEA,mCACA,YACA,mDACA,+BAEA,sBACA,oBACA,4BAGA,sBACA,eACA,kBACA,0CACA,oCACA,gBACA,qBACA,MACA,sBACA,iBACA,sBACA,YACA,YACA,YACA,gBAIA,mBACA,YACA,yDACA,WAEA,mBACA,iBACA,yBAIA,oBACA,oBACA,WAEA,2BAEA,0BACA,kBACA,oBAKA,6CAIA,kCACA,0BAEA,kCACA,YACA,mDACA,+BAEA,sBACA,oBACA,4BAIA,sBACA,cACA,kBACA,gDACA,WAEA,gBACA,oBACA,MACA,sBACA,iBACA,sBACA,YACA,YACA,YACA,UACA,YACA,oBACA,mBACA,iBACA,iBACA,aACA,aACA,8BAMA,YACA,4DAIA,mBACA,YACA,wDACA,WAEA,mBACA,iBACA,yBAOA,iBACA,mBACA,2BACA,MACA,yBACA,iBACA,yBACA,eACA,mBAIA,yBACA,uDACA,SACA,IACA,0BACA,SACA,GACA,sBACA,sBACA,gBAGA,mDAGA,GACA,6BACA,kCACA,2BACA,CAEA,2BACA,8BACA,8BAEA,+CACA,WACA,0CAEA,YACA,kDAIA,yDACA,2BAGA,qBACA,IAMA,GADA,gEACA,6BAuCA,GAtCA,mCACA,kBACA,oCACA,8CACA,uDACA,mBACA,gBAIA,wDAGA,mBACA,6CACA,oCACA,wDACA,mBACA,iBAIA,iDAGA,kCACA,0DAEA,+DAEA,6DACA,iDACA,yCACA,gDACA,wCACA,6CACA,qCAEA,2BACA,IACA,mBACA,yDACA,qBACA,uDACA,yDACA,6DACA,0DAEA,SACA,2CAGA,iDACA,sCAEA,+CACA,iCAEA,SAGA,OAFA,2EACA,oCAIA,gBACA,WACA,SACA,2BACA,4BACA,8CACA,eACA,gCACA,yDACA,sBACA,sCACA,oDAEA,SACA,OAEA,UAEA,0BACA,oCAEA,wBAKA,qCAEA,mBACA,gBAGA,wCACA,gCACA,4BAMA,2DAGA,2BAEA,GADA,gCACA,uBACA,kCACA,YACA,8DACA,aAEA,oCACA,iCACA,0CACA,mBACA,oBAGA,CACA,kCACA,YACA,iEACA,aAEA,uBACA,iCACA,0CACA,mBACA,kBAMA,sBAGA,aAEA,mBACA,4BACA,MACA,yBACA,iBACA,yBACA,eACA,eACA,0BACA,gCACA,0BACA,8CAOA,uCACA,iCAIA,+FACA,iCAMA,OALA,YACA,uCACA,6BAGA,0CACA,aACA,qBACA,MACA,aACA,mBACA,mCACA,mBACA,uBAEA,MACA,gBACA,iBACA,QAIA,sCACA,6BAGA,iCACA,YACA,uCACA,6BAIA,mCACA,gCAGA,gCAKA,OAJA,YACA,0CACA,yBAEA,sCACA,aACA,mBACA,QAIA,0BACA,uCACA,oBACA,wBACA,gBACA,cACA,WACA,SACA,oBAMA,4BACA,4CAEA,8BAEA,MADA,6CAEA,qBACA,mBAEA,OADA,oEAOA,4BACA,4CAEA,QACA,wCACA,yBAGA,UACA,iBACA,6DAEA,OACA,IACA,IACA,IACA,IACA,KACA,gBACA,IACA,IACA,IACA,IACA,IACA,KACA,eAEA,iBACA,4BAEA,cACA,oDACA,iBAEA,SACA,0BAGA,kBACA,mBACA,2BACA,mBACA,4BACA,SAEA,6BAOA,+CAKA,gBACA,8BACA,4BACA,+CAKA,YACA,WACA,yBACA,qBACA,8BACA,GACA,EACA,UACA,kBACA,+BAEA,UACA,kBACA,gDAKA,cACA,gDAEA,wBACA,mEACA,kBAEA,iBACA,YACA,4CACA,6BAEA,YACA,6CACA,8BAEA,YACA,wDACA,sCAEA,YACA,yDACA,uCAEA,yCACA,kCAEA,wCACA,UACA,0CACA,6CAIA,wCACA,UACA,sBAGA,8BACA,wBAGA,MACA,kEACA,4BACA,yCACA,WAQA,SACA,6DAGA,2BACA,gBACA,2BAEA,oDAEA,qDAGA,eACA,2DAEA,oBACA,kEC5n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,GAAG,eAAeL,EAAG,MAAMA,EAAG,IAAI,CAACJ,EAAIS,GAAG,kCAAkCT,EAAI2B,QAAQ,GAAG3B,EAAI2B,QAC78J,EAAkB,G,0CCsHtB,kBAEA,OACA,aACA,OACA,OACA,eACA,eACA,YACA,QACA,OACA,UACA,YACA,gBACA,aACA,aACA,eACA,WACA,YACA,mBAGA,UACA,eACA,6BAEA,YACA,6CAIA,YAGA,UACA,6BACA,SACA,+BACA,kBAEA,OADA,iBACA,EAEA,gBAEA,qCACA,gBACA,6BAEA,sCACA,UACA,+CACA,iBACA,uCAGA,8CAIA,oBAKA,SACA,UACA,eAEA,QACA,eACA,gBAEA,YACA,UAEA,UACA,mCACA,SAEA,oBACA,+BAGA,MACA,kBACA,8BACA,4BAEA,kBACA,gDACA,4CACA,4CACA,8CACA,eACA,eACA,QACA,eAEA,MAGA,oBAGA,IAFA,0CACA,eACA,oBACA,sBACA,WACA,YAGA,UAEA,kBAEA,OACA,iBACA,qBAEA,GACA,cACA,aACA,6CACA,SACA,mCAGA,OACA,WAEA,SACA,gCACA,kBACA,2CACA,qDACA,UAEA,oBAIA,UACA,kBAGA,cACA,OACA,kBAEA,GACA,aACA,mBACA,6CACA,SACA,kCACA,kCACA,qCAGA,OACA,WAEA,SAsBA,GArBA,gCAqBA,oBA+CA,OADA,sBACA,mBA7CA,qBA2BA,GA1BA,iBACA,sCAEA,+CAGA,uBACA,0CAGA,yCACA,sBACA,+BACA,2CAGA,yBACA,sDAGA,0BACA,0DAEA,0BACA,8CAEA,gDAGA,OAFA,+BACA,6BACA,oBAEA,uBACA,sCAEA,yDAEA,0CACA,2CACA,kBACA,2CAOA,oBAEA,UACA,kBAIA,UAEA,iCAgBA,GAfA,iBAEA,kCACA,6CAYA,aAEA,6BACA,4BADA,CAOA,qCACA,4BAIA,GAHA,6DACA,uBAEA,oCACA,+BACA,aAMA,yCACA,uBAEA,OACA,8BACA,iBAEA,GACA,cACA,oBACA,6CACA,SACA,kCACA,kCACA,qCAGA,OACA,WAEA,SAgBA,GAfA,0CACA,sBACA,oDAEA,4CAEA,wDACA,qBACA,sCAEA,mDACA,oDACA,6BAGA,oBAEA,OADA,sBACA,qBAGA,UACA,sBA9CA,gBAkDA,aACA,0BACA,qCACA,eACA,wCACA,0CAEA,YACA,qBACA,6BACA,0BACA,oHACA,kCAEA,iBACA,gBAEA,mCACA,oCAEA,4BAEA,iBACA,kBACA,uCACA,sCACA,kCAEA,UACA,wBACA,UACA,wBAEA,wBACA,aAGA,eACA,uCACA,sCAEA,uBACA,uBAEA,OACA,oBACA,sBC1eoV,ICQhV,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCNf,GACA,WACA,YACA,aACA,SAEA,OACA,OACA,UAGA,UACA,aACA,kCC1B8T,ICQ1T,G,UAAY,eACd,EACA5B,EACAQ,GACA,EACA,KACA,KACA,OAIa,I,oBChBf8C,OAAIC,IAAIC,QAER,MAAMC,EAAQ,IAAID,OAAKE,MAAM,CAC3B7C,MAAO,CACR8C,YAAY,2LAETC,SAAU,IACbC,QAAS,EACT/C,OAAO,EACPgD,OAAM,EACNnC,SAAQ,EACRoC,UAAU,KACV/C,QAAQ,GACLD,SAAU,CACZiD,KAAM,GACNC,OAAQ,GACRC,OAAO,oBACPjD,SAAS,GACTkD,MAAM,GACNC,UAAU,yCAKGX,QCtBfH,OAAIe,OAAOC,eAAgB,EAI3B,IAAIhB,OAAI,CACPiB,GAAI,OACJd,QACAzD,OAAQwE,GAAKA,EAAEC,KACbC,OAAO,S,uBCbVxG,EAAOD,QAAU,IAA0B,kC,qBCA3CC,EAAOD,QAAU,IAA0B,gD,uECA3CC,EAAOD,QAAU,IAA0B,mC,qBCA3CC,EAAOD,QAAU,IAA0B,yC,qBCA3CC,EAAOD,QAAU,IAA0B,2C,kCCA3C,W,qBCAAC,EAAOD,QAAU,IAA0B,8C,qBCA3CC,EAAOD,QAAU,IAA0B,gC,qBCA3CC,EAAOD,QAAU,IAA0B","file":"static/js/app.0e3aaaf3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"static/img/ic_video_photo.e8920b9c.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=d86a38dc&scoped=true&lang=css&\"","module.exports = \"data:image/png;base64,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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(_vm.listenshow)?_c('HelloWorld',{attrs:{\"msg\":\"Welcome to WanLuo call App\"}}):_c('Start',{attrs:{\"msg\":\"login\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',[_c('div',{staticClass:\"divcontxt\"},[_c('p',[_vm._v(\" 呼叫:\"+_vm._s(this.$store.state.actype==1?this.$store.state.callinfo.roomtel:this.$store.state.callinfo.doorname)+\" \")]),_c('p',{staticStyle:{\"color\":\"red\"}},[_c('b',[_vm._v(_vm._s(_vm.initstate))])]),_c('p',{attrs:{\"id\":\"calltimer\"}})]),_c('div',{staticClass:\"divhead\",attrs:{\"id\":\"videos\"}},[_c('video',{ref:\"remoteVideo\",staticStyle:{\"object-fit\":\"fill\"},attrs:{\"id\":\"remoteVideo\",\"muted\":\"true\",\"preload\":\"auto\",\"autoplay\":\"autoplay\",\"x-webkit-airplay\":\"true\",\"playsinline\":\"true\",\"webkit-playsinline\":\"true\",\"x5-video-player-type\":\"h5\",\"x5-video-player-fullscreen\":\"true\",\"x5-video-orientation\":\"portraint\"},domProps:{\"muted\":true}}),_c('div',{staticClass:\"arc\",attrs:{\"id\":\"loading\"}}),_c('canvas',{attrs:{\"id\":\"canvas\"}})]),_c('div',{staticClass:\"divcontrol\"},[_c('div'),_c('div',{staticClass:\"divctrl\"},[_c('div',{staticClass:\"wpbutton\",on:{\"click\":function($event){return _vm.hangup()}}},[_c('img',{staticClass:\"imgbt\",attrs:{\"src\":require(\"../assets/hangup.png\")}})])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 转载或引用请注明来源：\r\n 作者：谢宝新\r\n 电话：13902658317 \r\n 授权小乐开门公司使用\r\n -->\r\n<template>\r\n\t<article>\r\n\t\t<div class=\"divcontxt\">\r\n\t\t\t<p>\r\n\t\t\t\t呼叫:{{this.$store.state.actype==1?this.$store.state.callinfo.roomtel:this.$store.state.callinfo.doorname}}\r\n\t\t\t</p>\r\n\t\t\t<p style=\"color: red\">\r\n\t\t\t\t<b>{{ initstate }}</b>\r\n\t\t\t</p>\r\n\t\t\t<p id=\"calltimer\"></p>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"divhead\" id=\"videos\">\r\n\t\t\t<video id=\"remoteVideo\" ref=\"remoteVideo\" style=\"object-fit: fill\" muted=\"true\" preload=\"auto\"\r\n\t\t\t\tautoplay=\"autoplay\" x-webkit-airplay=\"true\" playsinline=\"true\" webkit-playsinline=\"true\"\r\n\t\t\t\tx5-video-player-type=\"h5\" x5-video-player-fullscreen=\"true\" x5-video-orientation=\"portraint\"></video>\r\n\t\t\t<div class=\"arc\" id=\"loading\"></div>\r\n\t\t\t<canvas id=\"canvas\"></canvas>\r\n\t\t</div>\r\n\t\t<div class=\"divcontrol\">\r\n\t\t\t<div></div>\r\n\t\t\t<div class=\"divctrl\">\r\n\r\n\t\t\t\t<div class=\"wpbutton\" @click=\"hangup()\">\r\n\t\t\t\t\t<img class=\"imgbt\" src=\"../assets/hangup.png\" />\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</article>\r\n</template>\r\n\r\n\r\n<script>\r\n\timport imga_1 from \"../assets/ic_video_photo.png\";\r\n\timport imgb_1 from \"../assets/ic_video_record.png\";\r\n\timport imgb_2 from \"../assets/play_video_record.png\";\r\n\timport imgc_1 from \"../assets/ic_video_stop.png\";\r\n\timport imgc_2 from \"../assets/ic_video_stop_land.png\";\r\n\timport imgd_1 from \"../assets/ic_video_unlock.png\";\r\n\timport imgd_2 from \"../assets/ic_video_unlock_land.png\";\r\n\r\n\tconst axios = require(\"axios\");\r\n\r\n\texport default {\r\n\t\tname: \"HelloWorld\",\r\n\t\tprops: {\r\n\t\t\tmsg: String,\r\n\t\t},\r\n\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgsrcscan: imga_1,\r\n\t\t\t\timgsrcrecord: imgb_1,\r\n\t\t\t\timgsrcspeek: imgc_2,\r\n\t\t\t\timgsrcaudio: imgd_1,\r\n\t\t\t\tIsLocalDataChannel: true,\r\n\t\t\t\tisAndroid: false,\r\n\t\t\t\tisIos: false,\r\n\t\t\t\tisChrome: false,\r\n\t\t\t\tisWeixin: false,\r\n\t\t\t\twebsock: null,\r\n\t\t\t\tshowVideo: true,\r\n\t\t\t\tconnected: false,\r\n\t\t\t\tconnecting: false,\r\n\t\t\t\tvideoplaying: false,\r\n\t\t\t\tsocketTask: false,\r\n\t\t\t\tstartRecive: false,\r\n\t\t\t\tStartCalled: false,\r\n\t\t\t\tCheckedgetUserMedia: false,\r\n\t\t\t\tIsWebSocketCreateed: false,\r\n\t\t\t\tIsWebSocketConnecting: false,\r\n\t\t\t\tIsWebSocketOpened: false,\r\n\t\t\t\tIsLocalAudioTrack: false,\r\n\t\t\t\tIsLocalVideoTrack: false,\r\n\t\t\t\tIsSystemAudioDeviceOK: false,\r\n\t\t\t\tIsFailCreate: false,\r\n\t\t\t\trecorded: false,\r\n\t\t\t\tspeak: false,\r\n\t\t\t\tmute: false,\r\n\t\t\t\tmyPeerConnection: null,\r\n\t\t\t\tmyDataChannel: null,\r\n\t\t\t\tstream: null,\r\n\t\t\t\tremoteMediaStream: null,\r\n\t\t\t\tmediaRecorder: null,\r\n\t\t\t\tremoteVideo: null,\r\n\t\t\t\theartCheck: null,\r\n\t\t\t\tmessagecallback: null,\r\n\t\t\t\tRTCPeerConnectionCreated: false,\r\n\t\t\t\tpeerid: \"\",\r\n\t\t\t\tmeid: \"\",\r\n\t\t\t\tdevice_id: \"\",\r\n\t\t\t\tcalltime: null,\r\n\t\t\t\tsessionId: \"\",\r\n\t\t\t\twsurl: \"\",\r\n\t\t\t\turl: \"\",\r\n\t\t\t\tmymsg: false,\r\n\t\t\t\troomId: \"\",\r\n\t\t\t\tIsReconnect: false,\r\n\t\t\t\ttimeout: 2000,\r\n\t\t\t\ttimedelay: 0,\r\n\t\t\t\tserverTimeoutObj: null,\r\n\t\t\t\tcanAddIceCandidate: false,\r\n\t\t\t\tIceCandidate: new Array(),\r\n\t\t\t\tconnectmode: \"live\",\r\n\t\t\t\tconnectsource: \"MainStream\",\r\n\t\t\t\tconfiguration: {\r\n\t\t\t\t\ticeServers: [{\r\n\t\t\t\t\t\turls: [\"stun:webrtc.qq-kan.com:3478?transport=udp\"],\r\n\t\t\t\t\t}, ],\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t\t// console.log('---created--',this.$store.state.callinfo);\r\n\t\t\tthis.calltime = this.getQueryString(\"time\");\r\n\r\n\t\t\tvar serno = this.getQueryString(\"topeer\");\r\n\t\t\tif (serno == null) {\r\n\t\t\t\talert('目标错误');\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.peerid = serno;\r\n\t\t\t}\r\n\t\t\tthis.sessionId = this.newGuid();\r\n\r\n\t\t\tvar selfpeerid = this.getQueryString(\"mypeer\");\r\n\t\t\tif (selfpeerid != null) {\r\n\t\t\t\tthis.meid = selfpeerid;\r\n\t\t\t} else {\r\n\t\t\t\talert('参数错误');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar device_id = this.getQueryString(\"device_id\");\r\n\t\t\tif (device_id != null) {\r\n\t\t\t\tthis.device_id = device_id;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.checktimesign()) {\r\n\t\t\t\tthis.initWebSocket();\r\n\t\t\t\tthis.NewgetUserMedia({\r\n\t\t\t\t\t\tvideo: this.$store.state.ability == 1 ? true : false,\r\n\t\t\t\t\t\taudio: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis.streamHandler,\r\n\t\t\t\t\tthis.errorHandler\r\n\t\t\t\t);\r\n\t\t\t\tthis.timerstart();\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tvar Videos = document.getElementById(\"videos\");\r\n\t\t\tvar canvas = document.getElementById(\"canvas\");\r\n\t\t\tvar loading = document.getElementById(\"loading\");\r\n\t\t\tcanvas.style.display = \"none\";\r\n\t\t\tdocument.title = \"WebRTC-设备端\";\r\n\r\n\t\t\tvar doorname = this.getQueryString(\"doorname\");\r\n\t\t\tif (doorname != null) {\r\n\t\t\t\t// doorname = decodeURI(this.getQueryVariable(\"doorname\"));\r\n\t\t\t\tdocument.title = doorname;\r\n\t\t\t}\r\n\r\n\t\t\tvar u = window.navigator.userAgent;\r\n\t\t\tif (u != null) {\r\n\t\t\t\tthis.isAndroid = u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1; //ios终端\r\n\t\t\t\tthis.isIos = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\r\n\t\t\t\tthis.isChrome = u.indexOf(\"Chrome\") !== -1; //Chrome 浏览器\r\n\t\t\t\tthis.isWeixin = u.indexOf(\"micromessenger\") != -1; //微信浏览器\r\n\t\t\t}\r\n\t\t\tif (this.isIos || this.isAndroid) {\r\n\t\t\t\tVideos.style.width = \"100%\";\r\n\t\t\t\t// Videos.style.height =\r\n\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16) + \"px\";\r\n\r\n\t\t\t\tloading.style.left =\r\n\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\tloading.style.top =\r\n\t\t\t\t\tMath.floor((document.documentElement.clientWidth * 9) / 16 / 2 - 25) +\r\n\t\t\t\t\t\"px\";\r\n\t\t\t} else {\r\n\t\t\t\tVideos.style.width = \"100%\";\r\n\t\t\t\tvar temheight = Math.floor(\r\n\t\t\t\t\t(document.documentElement.clientWidth * 9) / 16\r\n\t\t\t\t);\r\n\t\t\t\tif (temheight > document.documentElement.clientHeight - 60) {\r\n\t\t\t\t\t// Videos.style.height =\r\n\t\t\t\t\t// \tMath.floor(document.documentElement.clientHeight - 60) + \"px\";\r\n\t\t\t\t\tloading.style.left =\r\n\t\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\t\t// loading.style.top = Math.floor(Videos.style.height / 2 - 25) + \"px\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Videos.style.height =\r\n\t\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16) + \"px\";\r\n\t\t\t\t\tloading.style.left =\r\n\t\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\t\t// loading.style.top =\r\n\t\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16 / 2 - 25) +\r\n\t\t\t\t\t// \t\"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tloading.style.top = '45vh';\r\n\t\t\tthis.remoteVideo = document.getElementById(\"remoteVideo\");\r\n\t\t\tif (this.remoteVideo != null) {\r\n\t\t\t\tthis.remoteVideo.muted = true;\r\n\r\n\t\t\t\tthis.remoteVideo.addEventListener(\"playing\", this.OnVideoPlaying);\r\n\t\t\t\tthis.remoteVideo.addEventListener(\"play\", this.OnVideoPlay);\r\n\t\t\t\tthis.remoteVideo.addEventListener(\r\n\t\t\t\t\t\"loadedmetadata\",\r\n\t\t\t\t\tthis.OnVideoLoadedMetaData\r\n\t\t\t\t);\r\n\t\t\t\tthis.remoteVideo.addEventListener(\"canplay\", this.OnVideoCanPlay);\r\n\t\t\t\tthis.remoteVideo.addEventListener(\"error\", this.OnVideoError);\r\n\t\t\t\tthis.remoteVideo.addEventListener(\"loadeddata\", this.OnVideoLoadedData);\r\n\r\n\t\t\t\tif (this.isWeixin == true && this.isIos == false) {\r\n\t\t\t\t\tconsole.log(\"Your browser Weixin  no ios\");\r\n\t\t\t\t} else if (this.isWeixin == true && this.isIos == true) {\r\n\t\t\t\t\tconsole.log(\"Your browser Weixin addEventListener WeixinJSBridgeReady\");\r\n\t\t\t\t\tdocument.addEventListener(\r\n\t\t\t\t\t\t\"WeixinJSBridgeReady\",\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tif (this.videoplaying == false) {\r\n\t\t\t\t\t\t\t\tthis.videoplaying = true;\r\n\t\t\t\t\t\t\t\tvar playPromise = this.remoteVideo.play();\r\n\t\t\t\t\t\t\t\tif (playPromise) {\r\n\t\t\t\t\t\t\t\t\tplayPromise\r\n\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.videoplaying = true;\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"browser Weixin <video> play.\");\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.videoplaying = false;\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"<video> play error \", e.message);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.isChrome == true && this.isIos == false) {\r\n\t\t\t\t\t\tconsole.log(\"Your browser isChrome  no ios\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"Your browser isChrome   ios\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet _this = this; //赋值vue的this\r\n\t\t\twindow.onresize = () => {\r\n\t\t\t\t_this.pageResize();\r\n\t\t\t};\r\n\r\n\t\t\t// console.log('mounted  -----remotevideo ',this.remoteVideo);\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tinitstate() {\r\n\t\t\t\treturn this.$store.state.statename;\r\n\t\t\t},\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\twindow.onresize = null;\r\n\t\t\tif (this.websock != null) {\r\n\t\t\t\tthis.websock.close();\r\n\r\n\t\t\t}\r\n\t\t\tif (this.stream != null || !this.$store.state.isclose)\r\n\t\t\t\tthis.hangup();\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetQueryVariable(variable) {\r\n\t\t\t\tvar query = window.location.search.substring(1);\r\n\t\t\t\tvar vars = query.split(\"&\");\r\n\t\t\t\tfor (var i = 0; i < vars.length; i++) {\r\n\t\t\t\t\tvar pair = vars[i].split(\"=\");\r\n\t\t\t\t\tif (pair[0] == variable) {\r\n\t\t\t\t\t\treturn pair[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\r\n\t\t\thangup() {\r\n\t\t\t\tconsole.log(\"hangup\");\r\n\r\n\t\t\t\tthis.PostMessage(\"handup\");\r\n\t\t\t\tthis.PostMessage(\"hangup\");\r\n\r\n\t\t\t\tthis.$store.state.login = false;\r\n\t\t\t\tthis.$store.state.isclose = true;\r\n\r\n\t\t\t\tthis.posesynclose();\r\n\r\n\t\t\t\tthis.sendDisconnect();\r\n\t\t\t\tthis.handleLeave();\r\n\t\t\t\tthis.timerreset()\r\n\t\t\t\tthis.close();\r\n\r\n\t\t\t\tif (this.stream != null) {\r\n\t\t\t\t\tthis.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\ttrack.stop(); // 关闭摄像头和mic\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\twindow.localStream = null;\r\n\t\t\t\t\tthis.stream = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.websock != null) {\r\n\t\t\t\t\tthis.websock.close();\r\n\t\t\t\t\tthis.websock = null;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\tposesynclose() {\r\n\t\t\t\tvar parame = {\r\n\t\t\t\t\tcmd: 'hangup',\r\n\t\t\t\t\tsession: this.sessionId,\r\n\t\t\t\t\tlicence: this.meid,\r\n\t\t\t\t\tphone: this.peerid,\r\n\t\t\t\t\tet: this.device_id,\r\n\t\t\t\t\tty: 1\r\n\t\t\t\t};\r\n\t\t\t\tif (this.stream != null) {\r\n\t\t\t\t\taxios({\r\n\t\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\t\turl: 'wechat/sync',\r\n\t\t\t\t\t\t\tbaseURL: this.$store.state.callinfo.remoteurl,\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\t'Access-Control-Allow-Origin': '*',\r\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t\ttoken: this.$store.state.accesstoken,\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tdata: parame,\r\n\t\t\t\t\t\t\tparams: parame,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tconsole.log('wechat/sync', parame, res.data);\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t// 呼叫接通\r\n\t\t\twpvideocall() {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\tlicence: this.$store.state.callinfo.meid,\r\n\t\t\t\t\tphone: this.$store.state.callinfo.phone,\r\n\t\t\t\t\tet: this.$store.state.deviceId,\n\t\t\t\t\tsessionId: this.sessionId\r\n\t\t\t\t};\r\n\t\t\t\tconsole.log(param);\r\n\t\t\t\tvar ajaxurl = \"/wechat/confirm\";\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\turl: ajaxurl,\r\n\t\t\t\t\t\tbaseURL: this.$store.state.callinfo.remoteurl,\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\ttoken: this.$store.state.accesstoken,\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\tdata: param,\r\n\t\t\t\t\t\tparams: param,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log('--/wechat/confirm--', res.data);\r\n\t\t\t\t\t\tif (res.data.retCode == 200) {\r\n\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\tvar calltimer = document.getElementById(\"calltimer\");\r\n\t\t\t\t\t\t\tthat.$store.state.statename = \"呼叫中\";\r\n\t\t\t\t\t\t\tvar ti = that.$store.state.talkTime * 60;\r\n\t\t\t\t\t\t\tif (ti > 0) {\r\n\t\t\t\t\t\t\t\tvar stptimer = setInterval(function() {\r\n\t\t\t\t\t\t\t\t\tti--;\r\n\r\n\t\t\t\t\t\t\t\t\tif (that.$store.state.isclose) clearInterval(stptimer);\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\tif (ti <= 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tclearInterval(stptimer);\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$store.state.statename = \"呼叫失败\";\r\n\t\t\t\t\t\t\t\t\t\t\tthat.hangup();\r\n\t\t\t\t\t\t\t\t\t\t} else calltimer.innerHTML = ti + \"秒后结束\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// http://localhost/realvideo/dist/?selfpeerid=13531703369&device_id=29287\r\n\t\t\t// http://localhost/realvideo/dist/?serno=WPWL-00-C2NB-OE1X-00000005&selfpeerid=13531703369&device_id=29287&server=box.wangpeiaiot.com&time=1667223121\r\n\t\t\t// http://localhost/realvideo/dist/?serno=RHZL-00-SS48-GI8P-00000523&selfpeerid=13531703369&device_id=29112&server=webrtc.qq-kan.com&time=1667223121\r\n\r\n\t\t\tchecktimesign() {\r\n\t\t\t\tvar nowtime = new Date().valueOf();\r\n\t\t\t\tif (this.calltime == null || nowtime - +this.calltime > 45 * 1000) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\r\n\t\t\twebrtcrecord() {\r\n\t\t\t\tif (this.videoplaying == true) {\r\n\t\t\t\t\tif (this.recorded) {\r\n\t\t\t\t\t\tthis.stoprecord();\r\n\t\t\t\t\t\tthis.imgsrcrecord = imgb_1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.startrecord();\r\n\t\t\t\t\t\tthis.imgsrcrecord = imgb_2;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.imgsrcrecord = imgb_1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetlocalspeak() {\r\n\r\n\t\t\t\tif (this.myPeerConnection != null) {\r\n\t\t\t\t\tthis.speak = !this.speak;\r\n\t\t\t\t\tif (this.speak == true) {\r\n\t\t\t\t\t\tthis.imgsrcspeek = imgc_1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.imgsrcspeek = imgc_2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.remoteVideo != null) {\r\n\t\t\t\t\t\tif (this.remoteVideo.muted == true) {\r\n\t\t\t\t\t\t\tthis.remoteVideo.muted = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tthis.myPeerConnection.getReceivers().forEach(function(receiver) {\r\n\t\t\t\t\t\tif (receiver.track != null && receiver.track.kind === \"audio\") {\r\n\t\t\t\t\t\t\treceiver.track.enabled = that.speak;\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\"PeerConnection  setlocalspeak    -------------------------------------- \",\r\n\t\t\t\t\t\t\t\treceiver\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetlocalaudio() {\r\n\r\n\t\t\t\tif (this.myPeerConnection != null) {\r\n\t\t\t\t\tthis.mute = !this.mute;\r\n\t\t\t\t\tif (this.mute == true) {\r\n\t\t\t\t\t\tthis.imgsrcaudio = imgd_2;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.imgsrcaudio = imgd_1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tthis.myPeerConnection.getSenders().forEach(function(sender) {\r\n\t\t\t\t\t\tif (sender.track != null && sender.track.kind === \"audio\") {\r\n\t\t\t\t\t\t\tsender.track.enabled = that.mute;\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\"PeerConnection  setlocalaudio    -------------------------------------- \",\r\n\t\t\t\t\t\t\t\tsender\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartrecord() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif (this.remoteMediaStream != null) {\r\n\t\t\t\t\tthis.mediaRecorder = new MediaRecorder(this.remoteMediaStream);\r\n\t\t\t\t\tif (this.mediaRecorder != null) {\r\n\t\t\t\t\t\t//console.log(\"mediaRecorder  startrecord    -------------------------------------- \");\r\n\t\t\t\t\t\tthis.recorded = true;\r\n\t\t\t\t\t\tthis.mediaRecorder.blobs = [];\r\n\t\t\t\t\t\tthis.mediaRecorder.ondataavailable = function(e) {\r\n\t\t\t\t\t\t\tthat.mediaRecorder.blobs.push(e.data);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.mediaRecorder.onstop = function(e) {\r\n\t\t\t\t\t\t\t// console.log(\"mediaRecorder  onstop    -------------------------------------- \",e);\r\n\t\t\t\t\t\t\tif (e.type == \"stop\" && that.mediaRecorder.blobs.length) {\r\n\t\t\t\t\t\t\t\tvar recorderFile = new Blob(that.mediaRecorder.blobs, {\r\n\t\t\t\t\t\t\t\t\ttype: that.mediaRecorder.mimeType,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tvar downloadUrl = window.URL.createObjectURL(recorderFile);\r\n\t\t\t\t\t\t\t\tvar link = document.createElement(\"a\");\r\n\t\t\t\t\t\t\t\tlink.style.display = \"none\";\r\n\t\t\t\t\t\t\t\tlink.href = downloadUrl;\r\n\t\t\t\t\t\t\t\tlink.download = new Date().valueOf() + \"a.webm\";\r\n\t\t\t\t\t\t\t\t//link.disabled = false;\r\n\t\t\t\t\t\t\t\t//link.click();\r\n\r\n\t\t\t\t\t\t\t\tvar downloade = document.createEvent(\"MouseEvents\");\r\n\t\t\t\t\t\t\t\tdownloade.initMouseEvent(\r\n\t\t\t\t\t\t\t\t\t\"click\",\r\n\t\t\t\t\t\t\t\t\ttrue,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\twindow,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\tfalse,\r\n\t\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tlink.dispatchEvent(downloade);\r\n\t\t\t\t\t\t\t\tURL.revokeObjectURL(downloadUrl);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.mediaRecorder.start();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstoprecord() {\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.recorded == true &&\r\n\t\t\t\t\tthis.remoteMediaStream != null &&\r\n\t\t\t\t\tthis.mediaRecorder != null\r\n\t\t\t\t) {\r\n\t\t\t\t\t// console.log(\"mediaRecorder  stoprecord    -------------------------------------- \");\r\n\t\t\t\t\tthis.mediaRecorder.stop();\r\n\t\t\t\t\tthis.recorded = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscanpicture() {\r\n\t\t\t\tif (this.videoplaying == true) {\r\n\t\t\t\t\tvar canvas = document.getElementById(\"canvas\");\r\n\t\t\t\t\tvar video = document.getElementById(\"remoteVideo\");\r\n\t\t\t\t\tvar context = canvas.getContext(\"2d\");\r\n\t\t\t\t\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\t\t\t\t\tvar data = canvas.toDataURL(\"image/png\");\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"PeerConnection  scanpicture    -------------------------------------- \",\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tAndroidSaveVideoFile(blob) {\r\n\t\t\t\twindow.AndroidWebView.SaveVideoFile(blob);\r\n\t\t\t},\r\n\t\t\tpageResize() {\r\n\t\t\t\tvar Videos = document.getElementById(\"videos\");\r\n\t\t\t\tvar loading = document.getElementById(\"loading\");\r\n\t\t\t\tif (this.isIos || this.isAndroid) {\r\n\t\t\t\t\tVideos.style.width = \"100%\";\r\n\t\t\t\t\t// Videos.style.height =\r\n\t\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16) + \"px\";\r\n\r\n\t\t\t\t\tloading.style.left =\r\n\t\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\t\t// loading.style.top =\r\n\t\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16 / 2 - 25) +\r\n\t\t\t\t\t// \t\"px\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tVideos.style.width = \"100%\";\r\n\t\t\t\t\tvar temheight = Math.floor(\r\n\t\t\t\t\t\t(document.documentElement.clientWidth * 9) / 16\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (temheight > document.documentElement.clientHeight - 60) {\r\n\t\t\t\t\t\t// Videos.style.height =\r\n\t\t\t\t\t\t// \tMath.floor(document.documentElement.clientHeight - 60) + \"px\";\r\n\t\t\t\t\t\tloading.style.left =\r\n\t\t\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\t\t\tloading.style.top = Math.floor(Videos.style.height / 2 - 25) + \"px\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Videos.style.height =\r\n\t\t\t\t\t\t// \tMath.floor((document.documentElement.clientWidth * 9) / 16) + \"px\";\r\n\t\t\t\t\t\tloading.style.left =\r\n\t\t\t\t\t\t\tMath.floor(document.documentElement.clientWidth / 2 - 25) + \"px\";\r\n\t\t\t\t\t\tloading.style.top =\r\n\t\t\t\t\t\t\tMath.floor(\r\n\t\t\t\t\t\t\t\t(document.documentElement.clientWidth * 9) / 16 / 2 - 25\r\n\t\t\t\t\t\t\t) + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tloading.style.top = '45vh';\r\n\t\t\t},\r\n\t\t\ttimerreset() {\r\n\t\t\t\tclearTimeout(this.timeoutObj);\r\n\t\t\t\tclearTimeout(this.serverTimeoutObj);\r\n\t\t\t},\r\n\t\t\ttimerstart() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.serverTimeoutObj = setInterval(function() {\r\n\t\t\t\t\tthat.timedelay++;\r\n\t\t\t\t\tif (that.websock && that.websock.readyState === 1) {\r\n\t\t\t\t\t\tif (that.IsReconnect == true) {\r\n\t\t\t\t\t\t\tconsole.log(\"reconnect  ------------------- \");\r\n\t\t\t\t\t\t\tif (that.RTCPeerConnectionCreated == true) {\r\n\t\t\t\t\t\t\t\tthat.handleLeave();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.StartCalled = false;\r\n\t\t\t\t\t\t\tthat.sessionId = that.newGuid();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (that.timedelay > 30) {\r\n\t\t\t\t\t\t\t\tthat.timedelay = 0;\r\n\t\t\t\t\t\t\t\tthat.sendToServer({\r\n\t\t\t\t\t\t\t\t\teventName: \"__ping\",\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tsessionId: that.sessionId,\r\n\t\t\t\t\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\t\t\t\t\tmessageId: that.newGuid(),\r\n\t\t\t\t\t\t\t\t\t\tfrom: that.meid,\r\n\t\t\t\t\t\t\t\t\t\tto: that.peerid,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.timerreset();\r\n\t\t\t\t\t\tthat.timerstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (that.IsWebSocketConnecting == false) {\r\n\t\t\t\t\t\t\tif (that.websock != null) {\r\n\t\t\t\t\t\t\t\tthat.websock.close();\r\n\t\t\t\t\t\t\t\tthat.websock = null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (that.RTCPeerConnectionCreated == true) {\r\n\t\t\t\t\t\t\t\tthat.handleLeave();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthat.initWebSocket();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"IsWebSocketConnecting  ------------------- \");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this.timeout);\r\n\t\t\t},\r\n\t\t\tinitWebSocket() {\r\n\t\t\t\tif (!this.$store.state.login || this.$store.state.callinfo.meid == \"\")\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (this.IsWebSocketConnecting == true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar ishttps = \"https:\" == document.location.protocol ? true : false;\r\n\t\t\t\tthis.IsWebSocketConnecting = true;\r\n\t\t\t\tvar wsuri = \"\";\r\n\r\n\t\t\t\tvar host = this.getQueryString(\"server\");\r\n\t\t\t\tif (host == null || host == \"\") {\r\n\t\t\t\t\thost = \"rtcsv.yhxaiot.com\";\r\n\t\t\t\t}\r\n\t\t\t\t// this.meid='WPWL-00-EUB8-GAO8-00002006';\r\n\t\t\t\tif (host == \"localhost:8080\" || host == \"\") {\r\n\t\t\t\t\tif (ishttps) {\r\n\t\t\t\t\t\twsuri = \"wss://webrtc.qq-kan.com/wsequipment/\" + this.meid;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twsuri = \"ws://webrtc.qq-kan.com/wsequipment/\" + this.meid;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (ishttps) {\r\n\t\t\t\t\t\twsuri = \"wss://\" + host + \"/wsequipment/\" + this.meid;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twsuri = \"ws://\" + host + \"/wsequipment/\" + this.meid;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"initWebSocket --------\", wsuri);\r\n\r\n\t\t\t\t//https://dev.51hjk.com:4439/videocall/SHJT-00-RLRM-H9PW-00000012\r\n\t\t\t\t//const wsuri = 'wss://'+host+'/wswebclient/'+this.meid;\r\n\t\t\t\t// const wsuri = 'wss://webrtc.qq-kan.com/wswebclient/'+this.meid;\r\n\t\t\t\t//const wsuri = 'wss://dev.51hjk.com:4439/wswebclient/'+this.meid;\r\n\t\t\t\tif (this.websock != null) {\r\n\t\t\t\t\tthis.websock.close();\r\n\t\t\t\t\tthis.websock = null;\r\n\t\t\t\t}\r\n\t\t\t\tthis.websock = new WebSocket(wsuri);\r\n\r\n\t\t\t\tthis.websock.onmessage = this.websocketonmessage;\r\n\t\t\t\tthis.websock.onopen = this.websocketonopen;\r\n\t\t\t\tthis.websock.onerror = this.websocketonerror;\r\n\t\t\t\tthis.websock.onclose = this.websocketclose;\r\n\t\t\t},\r\n\t\t\twebsocketonopen() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.IsWebSocketOpened = true;\r\n\t\t\t\tconsole.log(\"initWebSocket --------open！\");\r\n\t\t\t\tif (this.websock != null && this.websock.readyState === 1) {\r\n\t\t\t\t\tthis.StartCalled = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tif (that.websock != null && that.websock.readyState === 1) {\r\n\t\t\t\t\t\t\tthat.StartCalled = false;\r\n\t\t\t\t\t\t\t// this.Connect();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 100);\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twebsocketonerror(e) {\r\n\t\t\t\t//连接建立失败重连\r\n\t\t\t\tthis.IsWebSocketOpened = false;\r\n\t\t\t\tthis.IsWebSocketConnecting = false;\r\n\t\t\t\tthis.websock = null;\r\n\t\t\t\tconsole.log(\"连接错误\", e);\r\n\t\t\t\t//this.meid=this.newGuid();\r\n\t\t\t\t//this.initWebSocket();\r\n\t\t\t},\r\n\t\t\twebsocketonmessage(e) {\r\n\t\t\t\t//数据接收\r\n\t\t\t\tconst data = JSON.parse(e.data);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"--<<<<<<<<<<<<<<<websocket- onmessage--:\" + data.eventName\r\n\t\t\t\t);\r\n\r\n\t\t\t\tswitch (data.eventName) {\r\n\t\t\t\t\tcase \"_call\":\r\n\t\t\t\t\t\tthis.handleCall(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_create\":\r\n\t\t\t\t\t\tthis.handleCreate(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_answer\":\r\n\t\t\t\t\t\tthis.$store.state.statename = \"接通中……\";\r\n\t\t\t\t\t\t// console.log(\"recv answer sdp :\" + data.data.sdp);\r\n\t\t\t\t\t\tthis.handleAnswner(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_ice_candidate\":\r\n\t\t\t\t\t\tthis.handleCandidate(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_session_disconnected\":\r\n\t\t\t\t\tcase \"_disconnected\":\r\n\t\t\t\t\t\tthis.$store.state.statename = \"挂机\";\r\n\t\t\t\t\t\tthis.hangup();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_post_message\":\r\n\t\t\t\t\t\tthis.handlePostMessage(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_connectinfo\":\r\n\t\t\t\t\tcase \"_connectto\":\r\n\t\t\t\t\t\tthis.handleConnectInfo(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_session_failed\":\r\n\t\t\t\t\t\tthis.handleSessionFailed(data.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"_ping\":\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.log(\"Got default message\", data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twebsocketsend(Data) {\r\n\t\t\t\tif (this.websock != null && this.websock.readyState === 1) {\r\n\t\t\t\t\tthis.websock.send(Data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twebsocketclose(e) {\r\n\t\t\t\t//关闭\r\n\t\t\t\tthis.IsWebSocketOpened = false;\r\n\t\t\t\tthis.IsWebSocketConnecting = false;\r\n\t\t\t\tthis.websock = null;\r\n\t\t\t\tconsole.log(\"断开连接\", e);\r\n\t\t\t},\r\n\t\t\tgetQueryString(name) {\r\n\t\t\t\tswitch (name) {\r\n\t\t\t\t\tcase \"server\":\r\n\t\t\t\t\t\treturn this.$store.state.callinfo.server;\r\n\r\n\t\t\t\t\tcase \"mypeer\":\r\n\t\t\t\t\t\treturn this.$store.state.callinfo.meid;\r\n\r\n\t\t\t\t\tcase \"topeer\":\r\n\t\t\t\t\t\treturn this.$store.state.callinfo.peerid;\r\n\r\n\t\t\t\t\tcase \"doorname\":\r\n\t\t\t\t\t\treturn this.$store.state.callinfo.doorname;\r\n\r\n\t\t\t\t\tcase \"device_id\":\r\n\t\t\t\t\t\treturn this.$store.state.deviceId;\r\n\r\n\t\t\t\t\tcase \"time\":\r\n\t\t\t\t\t\treturn new Date().valueOf();\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tNewgetUserMedia(constrains, success, error) {\r\n\t\t\t\t//访问用户媒体设备的兼容方法\r\n\t\t\t\tconsole.log(\"NewgetUserMedia----------------\");\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\twindow.navigator.mediaDevices &&\r\n\t\t\t\t\twindow.navigator.mediaDevices.getUserMedia\r\n\t\t\t\t) {\r\n\t\t\t\t\t//最新标准API\r\n\t\t\t\t\twindow.navigator.mediaDevices\r\n\t\t\t\t\t\t.getUserMedia(constrains)\r\n\t\t\t\t\t\t.then(success)\r\n\t\t\t\t\t\t.catch(error);\r\n\t\t\t\t} else if (window.navigator.webkitGetUserMedia) {\r\n\t\t\t\t\t//webkit内核浏览器\r\n\t\t\t\t\twindow.navigator\r\n\t\t\t\t\t\t.webkitGetUserMedia(constrains)\r\n\t\t\t\t\t\t.then(success)\r\n\t\t\t\t\t\t.catch(error);\r\n\t\t\t\t} else if (window.navigator.mozGetUserMedia) {\r\n\t\t\t\t\t//Firefox浏览器\r\n\t\t\t\t\twindow.navagator.mozGetUserMedia(constrains).then(success).catch(error);\r\n\t\t\t\t} else if (window.navigator.getUserMedia) {\r\n\t\t\t\t\t//旧版API\r\n\t\t\t\t\twindow.navigator.getUserMedia(constrains).then(success).catch(error);\r\n\t\t\t\t} else if (window.navigator.msGetUserMedia) {\r\n\t\t\t\t\twindow.navigator.msGetUserMedia(constrains).then(success).catch(error);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.CheckedgetUserMedia = false;\r\n\t\t\t\t\tthis.IsLocalAudioTrack = false;\r\n\t\t\t\t\tconsole.log(\"Your browser no getUserMedia function\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tConnect() {\r\n\t\t\t\t// 设备端连上即可，等待——call\r\n\t\t\t\tthis.sendToServer({\r\n\t\t\t\t\teventName: \"__connectto\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsessionId: this.sessionId,\r\n\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\tmessageId: this.newGuid(),\r\n\t\t\t\t\t\tfrom: this.meid,\r\n\t\t\t\t\t\tto: this.peerid,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleDisconnect(data) {\r\n\t\t\t\tif (data.sessionId == this.sessionId) {\r\n\t\t\t\t\tconsole.log(\"handleDisconnect \", JSON.stringify(data));\r\n\t\t\t\t\tif (this.RTCPeerConnectionCreated == true) {\r\n\t\t\t\t\t\tthis.handleLeave();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendToServer(message) {\r\n\t\t\t\tconsole.log(\"------>>>>>>>>>>websocket---send : \", message.eventName);\r\n\r\n\t\t\t\tthis.websocketsend(JSON.stringify(message));\r\n\r\n\t\t\t},\r\n\t\t\tPostMessage(message, callback) {\r\n\t\t\t\tif (this.connected == true) {\r\n\t\t\t\t\tvar messageid = this.newGuid();\r\n\t\t\t\t\tthis.messagecallback = callback;\r\n\t\t\t\t\tthis.sendToServer({\r\n\t\t\t\t\t\teventName: \"__post_message\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsessionId: this.sessionId,\r\n\t\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\t\tmessageId: messageid,\r\n\t\t\t\t\t\t\tto: this.peerid,\r\n\t\t\t\t\t\t\tfrom: this.meid,\r\n\t\t\t\t\t\t\tmessage: message,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandlePostMessage(data) {\r\n\t\t\t\t/* console.log(\r\n\t\t\t\t\t\"handlePostMessage  recv    -------------------------------------- \",\r\n\t\t\t\t\tdata\r\n\t\t\t\t); */\r\n\t\t\t\tif (this.messagecallback === undefined || this.messagecallback === null) {\r\n\t\t\t\t\t//console.log(\"handlePostMessage\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttypeof this.messagecallback === \"function\" &&\r\n\t\t\t\t\t\tthis.messagecallback(data.message);\r\n\t\t\t\t\tthis.messagecallback = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (data.message == \"callon\") {\r\n\t\t\t\t\tthis.$store.state.statename = \"通话中\";\r\n\t\t\t\t\t// 打开声音---\r\n\t\t\t\t\tthis.mute = true;\r\n\t\t\t\t\tthis.setlocalspeak();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSessionFailed(data) {\r\n\t\t\t\tconsole.log(\"handleSessionFailed \", data);\r\n\t\t\t\tif (data.sessionId == this.sessionId) {\r\n\t\t\t\t\tif (this.RTCPeerConnectionCreated == true) {\r\n\t\t\t\t\t\tthis.handleLeave();\r\n\t\t\t\t\t\tthis.sendDisconnect();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sessionId = this.newGuid();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleCreate(data) {\r\n\t\t\t\tconsole.log(\"WebSocket _create\", data);\r\n\t\t\t\tif (data.state === \"online\" || data.state === \"sleep\") {\r\n\t\t\t\t\tthis.IsWebSocketCreateed = true;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tdata.iceServers !== null ||\r\n\t\t\t\t\t\tdata.iceServers !== undefined ||\r\n\t\t\t\t\t\tdata.iceServers !== \"\"\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t//console.log(\"WebSocket iceServers\", data.iceServers);\r\n\t\t\t\t\t\t//服务器把ICE 服务的信息下发到js创建RTCPeerConnection使用\r\n\t\t\t\t\t\t//configuration = JSON.parse(data.iceServers);\r\n\t\t\t\t\t\tif (data.iceServers.constructor === Object) {\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\" _create  iceServers ---object ---- \",\r\n\t\t\t\t\t\t\t\tJSON.stringify(data.iceServers)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.configuration = JSON.parse(JSON.stringify(data.iceServers));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\" _create  iceServers ---string ---- :\",\r\n\t\t\t\t\t\t\t\tdata.iceServers\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.configuration = JSON.parse(data.iceServers);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.CheckedgetUserMedia == true && this.StartCalled == false) {\r\n\t\t\t\t\t\tconsole.log(\"handleCreate  start call\");\r\n\t\t\t\t\t\tthis.Call();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"handleCreate  CheckedgetUserMedia =\",\r\n\t\t\t\t\t\t\tthis.CheckedgetUserMedia,\r\n\t\t\t\t\t\t\t\" StartCalled=\",\r\n\t\t\t\t\t\t\tthis.StartCalled\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\" _create  offline  \", data.from);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tCall() {\r\n\t\t\t\t// --建立链接之后等待对方呼叫\r\n\t\t\t\tthis.StartCalled = true;\r\n\t\t\t\tvar audioenable = \"sendrecv\";\r\n\t\t\t\tvar videoenable = \"sendrecv\";\r\n\t\t\t\tvar datachannelenable = \"true\";\r\n\t\t\t\tif (this.IsLocalDataChannel == false) {\r\n\t\t\t\t\tdatachannelenable = \"false\";\r\n\t\t\t\t}\r\n\t\t\t\tif (this.IsLocalAudioTrack == false) {\r\n\t\t\t\t\taudioenable = \"recvonly\";\r\n\t\t\t\t}\r\n\t\t\t\tif (this.IsLocalVideoTrack == false) {\r\n\t\t\t\t\tvideoenable = \"recvonly\";\r\n\t\t\t\t}\r\n\t\t\t\t//audioenable = \"sendonly\";\r\n\t\t\t\t//videoenable = \"sendonly\";\r\n\t\t\t\t//datachannelenable = \"true\";\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"call audio --------------\",\r\n\t\t\t\t\taudioenable,\r\n\t\t\t\t\t\" video \",\r\n\t\t\t\t\tvideoenable,\r\n\t\t\t\t\t\" datachannel\",\r\n\t\t\t\t\tdatachannelenable\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\thandleConnectInfo(data) {\r\n\t\t\t\tconsole.log(\"Got ConnectInfo Message:\", data.message);\r\n\t\t\t\t// 设备端连上即可，等待——call\r\n\t\t\t\tthis.sendToServer({\r\n\t\t\t\t\teventName: \"__pong\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsessionId: this.sessionId,\r\n\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\tmessageId: this.newGuid(),\r\n\t\t\t\t\t\tfrom: this.meid,\r\n\t\t\t\t\t\tto: this.peerid,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleLeave() {\r\n\t\t\t\tconsole.log(\"handleLeave  --------\");\r\n\t\t\t\tvar that = this;\r\n\r\n\t\t\t\tif (this.myDataChannel != null) {\r\n\t\t\t\t\tthis.myDataChannel.close();\r\n\t\t\t\t\tthis.myDataChannel.onopen = null;\r\n\t\t\t\t\tthis.myDataChannel.onclose = null;\r\n\t\t\t\t\tthis.myDataChannel.onmessage = null;\r\n\t\t\t\t\tthis.myDataChannel.onerror = null;\r\n\t\t\t\t\tthis.myDataChannel = null;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.myPeerConnection != null) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"handleLeave  --------signalingState = \",\r\n\t\t\t\t\t\tthis.myPeerConnection.signalingState\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (this.myPeerConnection.signalingState == \"closed\") {\r\n\t\t\t\t\t\tthis.handleRelease();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.myPeerConnection.getSenders().forEach((sender) => {\r\n\t\t\t\t\t\t\t// console.log(\"removeTrack  \", sender);\r\n\t\t\t\t\t\t\tthat.myPeerConnection.removeTrack(sender);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.myPeerConnection.close();\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tif (that.myPeerConnection != null) {\r\n\t\t\t\t\t\t\t\tif (that.myPeerConnection.signalingState == \"closed\") {\r\n\t\t\t\t\t\t\t\t\tthat.handleRelease();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.videoplaying = false;\r\n\t\t\t\tthis.RTCPeerConnectionCreated = false;\r\n\t\t\t\tthis.StartCalled = false;\r\n\t\t\t\tthis.IceCandidate.splice(0, this.IceCandidate.length);\r\n\r\n\t\t\t},\r\n\t\t\thandleRelease() {\r\n\t\t\t\tconsole.log(\"handleRelease  ========\");\r\n\t\t\t\tif (this.myPeerConnection != null) {\r\n\t\t\t\t\tthis.myPeerConnection.onicecandidate = null;\r\n\t\t\t\t\tthis.myPeerConnection.onaddstream = null;\r\n\t\t\t\t\tthis.myPeerConnection.ontrack = null;\r\n\t\t\t\t\tthis.myPeerConnection.onsignalingstatechange = null;\r\n\t\t\t\t\tthis.myPeerConnection.onicegatheringstatechange = null;\r\n\t\t\t\t\tthis.myPeerConnection = null;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.IsFailCreate == false) {\r\n\t\t\t\t\tthis.IsReconnect = true;\r\n\t\t\t\t}\r\n\t\t\t\twindow.localStream = null;\r\n\t\t\t\tthis.stream = null;\r\n\t\t\t},\r\n\t\t\tasync handleAnswner(data) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconsole.log(\"  setRemoteDescription --------\");\r\n\t\t\t\tvar nativeRTCSessionDescription =\r\n\t\t\t\t\twindow.mozRTCSessionDescription || window.RTCSessionDescription;\r\n\t\t\t\tvar SessionDescription = new nativeRTCSessionDescription({\r\n\t\t\t\t\ttype: \"answer\",\r\n\t\t\t\t\tsdp: data.sdp\r\n\t\t\t\t});\r\n\t\t\t\tawait this.myPeerConnection.setRemoteDescription(SessionDescription).then(function() {\r\n\t\t\t\t\t\tthat.canAddIceCandidate = true;\r\n\t\t\t\t\t\tthat.IceCandidate.forEach((obj) => {\r\n\t\t\t\t\t\t\tconsole.log(\" add addIceCandidate --------------\", obj.candidate);\r\n\r\n\t\t\t\t\t\t\tvar candidate = new RTCIceCandidate({\r\n\t\t\t\t\t\t\t\tsdpMLineIndex: obj.sdpMLineIndex,\r\n\t\t\t\t\t\t\t\tcandidate: obj.candidate,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.myPeerConnection.addIceCandidate(candidate);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthat.IceCandidate.splice(0, that.IceCandidate.length);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\tconsole.log(\"  setRemoteDescription --------error:\" + err);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tasync handleOffer(data) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.IsReconnect = false;\r\n\t\t\t\tconsole.log(\"Offer --- ---- sdp  :\\n\", data.sdp);\r\n\r\n\t\t\t\tif (this.RTCPeerConnectionCreated == false) {\r\n\t\t\t\t\tthis.initPeerConnection();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.RTCPeerConnectionCreated == false) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"handleOffer Failed   RTCPeerConnectionCreated = \",\r\n\t\t\t\t\t\tthis.RTCPeerConnectionCreated\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.sendDisconnect();\r\n\t\t\t\t\tthis.IsReconnect = false;\r\n\t\t\t\t\tthis.IsFailCreate = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait this.myPeerConnection\r\n\t\t\t\t\t.createAnswer()\r\n\t\t\t\t\t.then(function(answer) {\r\n\t\t\t\t\t\tthat.myPeerConnection.setLocalDescription(answer);\r\n\t\t\t\t\t\tconsole.log(\"Answer sdp :\\n\" + answer.sdp);\r\n\t\t\t\t\t\tthat.sendToServer({\r\n\t\t\t\t\t\t\teventName: \"__answer\",\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tsessionId: that.sessionId,\r\n\t\t\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\t\t\tmessageId: that.newGuid(),\r\n\t\t\t\t\t\t\t\tfrom: that.meid,\r\n\t\t\t\t\t\t\t\tto: that.peerid,\r\n\t\t\t\t\t\t\t\ttype: answer.type,\r\n\t\t\t\t\t\t\t\tsdp: answer.sdp,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"Error when create  Answer-----------------------------\",\r\n\t\t\t\t\t\t\terror.message\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthat.sendDisconnect();\r\n\t\t\t\t\t\tthat.IsReconnect = true;\r\n\t\t\t\t\t\tthis.IsFailCreate = true;\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tasync handleCall(data) {\r\n\t\t\t\tthis.IsReconnect = false;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t// console.log(\"handleCall --- ----\", data);\r\n\t\t\t\tthis.sessionId = data.sessionId;\r\n\t\t\t\tif (\r\n\t\t\t\t\tdata.iceservers !== null ||\r\n\t\t\t\t\tdata.iceservers !== undefined ||\r\n\t\t\t\t\tdata.iceservers !== \"\"\r\n\t\t\t\t) {\r\n\t\t\t\t\t// console.log(\"WebSocket iceServers\", data.iceservers);\r\n\t\t\t\t\t//服务器把ICE 服务的信息下发到js创建RTCPeerConnection使用\r\n\t\t\t\t\t//configuration = JSON.parse(data.iceservers);\r\n\t\t\t\t\tthis.configuration = JSON.parse(data.iceservers);\r\n\t\t\t\t\t// console.log(\"WebSocket iceServers\", this.configuration);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.RTCPeerConnectionCreated == false) {\r\n\t\t\t\t\tthis.initPeerConnection();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.RTCPeerConnectionCreated == false) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"handleOffer Failed   RTCPeerConnectionCreated = \",\r\n\t\t\t\t\t\tthis.RTCPeerConnectionCreated\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.sendDisconnect();\r\n\t\t\t\t\tthis.IsReconnect = false;\r\n\t\t\t\t\tthis.IsFailCreate = true;\r\n\t\t\t\t} else {\r\n\r\n\r\n\t\t\t\t\tawait this.myPeerConnection\r\n\t\t\t\t\t\t.createOffer()\r\n\t\t\t\t\t\t.then(function(offer) {\r\n\t\t\t\t\t\t\tthat.myPeerConnection.setLocalDescription(offer).then(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t// console.log(\"-----send--- Offer sdp :\\n\" + offer.sdp);\r\n\t\t\t\t\t\t\t\t\tthat.sendToServer({\r\n\t\t\t\t\t\t\t\t\t\teventName: \"__offer\",\r\n\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\tsessionId: that.sessionId,\r\n\t\t\t\t\t\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\t\t\t\t\t\tmessageId: that.newGuid(),\r\n\t\t\t\t\t\t\t\t\t\t\tfrom: that.meid,\r\n\t\t\t\t\t\t\t\t\t\t\tto: that.peerid,\r\n\t\t\t\t\t\t\t\t\t\t\ttype: offer.type,\r\n\t\t\t\t\t\t\t\t\t\t\tsdp: offer.sdp,\r\n\t\t\t\t\t\t\t\t\t\t\tmode: \"live\",\r\n\t\t\t\t\t\t\t\t\t\t\tsource: \"MainStream\",\r\n\t\t\t\t\t\t\t\t\t\t\tdatachannel: \"true\",\r\n\t\t\t\t\t\t\t\t\t\t\taudio: \"sendrecv\",\r\n\t\t\t\t\t\t\t\t\t\t\tvideo: \"sendrecv\",\r\n\t\t\t\t\t\t\t\t\t\t\tuser: \"admin\",\r\n\t\t\t\t\t\t\t\t\t\t\tpwd: \"123456\",\r\n\t\t\t\t\t\t\t\t\t\t\ticeservers: data.iceServers,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"  setLocalDescription --------error \" + err);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\t\"Error when create  offer-----------------------------\",\r\n\t\t\t\t\t\t\t\terror.message\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthat.sendDisconnect();\r\n\t\t\t\t\t\t\tthat.IsReconnect = true;\r\n\t\t\t\t\t\t\tthis.IsFailCreate = true;\r\n\t\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsendDisconnect() {\r\n\t\t\t\tthis.sendToServer({\r\n\t\t\t\t\teventName: \"__disconnected\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsessionId: this.sessionId,\r\n\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\tmessageId: this.newGuid(),\r\n\t\t\t\t\t\tfrom: this.meid,\r\n\t\t\t\t\t\tto: this.peerid,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync handleCandidate(data) {\r\n\t\t\t\tconsole.log(\"----handleCandidate-data：\", data, data.candidate)\r\n\t\t\t\tvar obj = {};\r\n\t\t\t\ttry {\r\n\t\t\t\t\tobj = JSON.parse(data.candidate);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tobj = {\r\n\t\t\t\t\t\t'candidate': data.candidate,\r\n\t\t\t\t\t\t'sdpMLineIndex': data.label,\r\n\t\t\t\t\t\t'sdpMid': data.label,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconsole.log(\"----handleCandidate-data-erro to：\", obj);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.myPeerConnection != null &&\r\n\t\t\t\t\tthis.RTCPeerConnectionCreated == true &&\r\n\t\t\t\t\tthis.canAddIceCandidate == true\r\n\t\t\t\t) {\r\n\t\t\t\t\t// console.log(\"candidate --- ----   :\", obj.candidate);\r\n\t\t\t\t\tvar candidate = new RTCIceCandidate({\r\n\t\t\t\t\t\tsdpMLineIndex: obj.sdpMLineIndex,\r\n\t\t\t\t\t\tcandidate: obj.candidate,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.myPeerConnection.addIceCandidate(candidate).then(\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tconsole.log(\" IceCandidate  sucessed\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(err) {\r\n\t\t\t\t\t\t\tconsole.log(\"add IceCandidate error:\", +err);\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"handleCandidate add to tmp IceCandidate\", obj);\r\n\t\t\t\t\tthis.IceCandidate.push(obj);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitPeerConnection() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t/* console.log(\r\n\t\t\t\t\t\t\"initPeerConnection create PeerConnection configuration =\",\r\n\t\t\t\t\t\tthis.configuration\r\n\t\t\t\t\t); */\r\n\t\t\t\t\tthis.myPeerConnection = new RTCPeerConnection(this.configuration);\r\n\t\t\t\t\tif (this.myPeerConnection != null) {\r\n\t\t\t\t\t\tif (\"addTrack\" in this.myPeerConnection) {\r\n\t\t\t\t\t\t\tif (this.stream != null) {\r\n\t\t\t\t\t\t\t\tthis.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\t\t\tthis.myPeerConnection.addTrack(track, this.stream);\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"PeerConnection use addTrack type\", track.kind);\r\n\t\t\t\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\t\t\t\ttrack.enabled = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(\"PeerConnection  addTrack  stream is null\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.stream != null) {\r\n\t\t\t\t\t\t\t\tthis.myPeerConnection.addStream(this.stream);\r\n\t\t\t\t\t\t\t\tthis.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"PeerConnection use addStream type\", track.kind);\r\n\t\t\t\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\t\t\t\ttrack.enabled = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(\"PeerConnection  addStream is null\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\"ontrack\" in this.myPeerConnection) {\r\n\t\t\t\t\t\t\tthis.myPeerConnection.ontrack = this.handleRemoteTrackAdded;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.myPeerConnection.onaddstream = this.handleRemoteStreamAdded;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.myPeerConnection.onicecandidate = this.handleIceCandidate;\r\n\t\t\t\t\t\tthis.myPeerConnection.oniceconnectionstatechange =\r\n\t\t\t\t\t\t\tthis.handleIceConnectionStateChangeEvent;\r\n\t\t\t\t\t\tthis.myPeerConnection.onicegatheringstatechange =\r\n\t\t\t\t\t\t\tthis.handleIceGatheringStateChangeEvent;\r\n\t\t\t\t\t\tthis.myPeerConnection.onsignalingstatechange =\r\n\t\t\t\t\t\t\tthis.handleSignalingStateChangeEvent;\r\n\t\t\t\t\t\t//myPeerConnection.onnegotiationneeded = handleNegotiationNeededEvent;\r\n\t\t\t\t\t\tif (this.IsLocalDataChannel == true) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tthis.myDataChannel =\r\n\t\t\t\t\t\t\t\t\tthis.myPeerConnection.createDataChannel(\"mydatachannel\");\r\n\t\t\t\t\t\t\t\tif (this.myDataChannel) {\r\n\t\t\t\t\t\t\t\t\tthis.myDataChannel.onopen = this.handleDataChannelOnOpen;\r\n\t\t\t\t\t\t\t\t\tthis.myDataChannel.onclose = this.handleDataChannelOnClose;\r\n\t\t\t\t\t\t\t\t\tthis.myDataChannel.onmessage = this.handleDataChannelOnMessage;\r\n\t\t\t\t\t\t\t\t\tthis.myDataChannel.onerror = this.handleDataChannelOnError;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.log(\"data_channel_create_error  \");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(\"Sucessed to create PeerConnection\");\r\n\t\t\t\t\t\tthis.RTCPeerConnectionCreated = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"Failed to create PeerConnection\");\r\n\t\t\t\t\t\tthis.RTCPeerConnectionCreated = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"Failed to create PeerConnection, exception: \" + e.message);\r\n\t\t\t\t\tthis.RTCPeerConnectionCreated = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetObjectURL(stream) {\r\n\t\t\t\tvar url = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (window.createObjectURL != undefined) {\r\n\t\t\t\t\t\turl = window.createObjectURL(stream);\r\n\t\t\t\t\t\tconsole.log(\"window createObjectURL\", url);\r\n\t\t\t\t\t} else if (window.URL != undefined) {\r\n\t\t\t\t\t\turl = window.URL.createObjectURL(stream);\r\n\t\t\t\t\t\tconsole.log(\"window window.URLcreateObjectURL \", url);\r\n\t\t\t\t\t} else if (window.webkitURL != undefined) {\r\n\t\t\t\t\t\turl = window.webkitURL.createObjectURL(stream);\r\n\t\t\t\t\t\tconsole.log(\"window.webkitURL.createObjectURL \", url);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\turl = null;\r\n\t\t\t\t}\r\n\t\t\t\treturn url;\r\n\t\t\t},\r\n\t\t\thandleRemoteTrackAdded(e) {\r\n\t\t\t\tthis.remoteMediaStream = e.streams[0];\r\n\t\t\t\t//console.log(\"handleRemoteTrackAdded\",JSON.stringify(e));\r\n\t\t\t\tif (this.remoteVideo != null) {\r\n\t\t\t\t\t// console.log(\r\n\t\t\t\t\t// \t\"handleRemoteTrackAdded attachStream srcObject stream id = \",\r\n\t\t\t\t\t// \te.streams[0].id\r\n\t\t\t\t\t// );\r\n\t\t\t\t\te.streams[0].getTracks().forEach((track) => {\r\n\t\t\t\t\t\t// console.log(\"handleRemoteTrackAdded  \", track);\r\n\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\ttrack.enabled = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.remoteVideo.srcObject = e.streams[0];\r\n\t\t\t\t\tif (this.IsSystemAudioDeviceOK == false) {\n\t\t\t\t\t\tthis.remoteVideo.muted=false;\n\t\t\t\t\t\t// if (this.isIos) {\r\n\t\t\t\t\t\t// \tthis.remoteVideo.muted = true; \r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"handleRemoteTrackAdded  video view is null\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleRemoteStreamAdded(e) {\r\n\t\t\t\tthis.remoteMediaStream = e.stream;\r\n\t\t\t\tif (this.remoteVideo != null) {\r\n\t\t\t\t\tif (\"srcObject\" in this.remoteVideo) {\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"handleRemoteStreamAdded attachStream srcObject stream id = \",\r\n\t\t\t\t\t\t\te.stream.id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.remoteVideo.srcObject = e.stream;\r\n\t\t\t\t\t\te.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\tconsole.log(\"handleRemoteTrackAdded  \", track);\r\n\t\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\t\ttrack.enabled = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar objUrl = this.getObjectURL(e.stream);\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t\"handleRemoteStreamAdded attachStream getObjectURL stream id = \",\r\n\t\t\t\t\t\t\te.stream.id\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.remoteVideo.src = objUrl;\r\n\t\t\t\t\t\te.stream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\tconsole.log(\"handleRemoteTrackAdded  \", track);\r\n\t\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\t\ttrack.enabled = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleIceCandidate(event) {\r\n\r\n\r\n\t\t\t\tif (event.candidate) {\r\n\t\t\t\t\t// console.log(\"onicecandidate: ------------------>>>>>>>>\" + event.candidate.candidate);\r\n\t\t\t\t\tthis.sendToServer({\r\n\t\t\t\t\t\teventName: \"__ice_candidate\",\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tsessionId: this.sessionId,\r\n\t\t\t\t\t\t\tsessionType: \"IE\",\r\n\t\t\t\t\t\t\tmessageId: this.newGuid(),\r\n\t\t\t\t\t\t\tto: this.peerid,\r\n\t\t\t\t\t\t\tfrom: this.meid,\r\n\t\t\t\t\t\t\tcandidate: JSON.stringify({\r\n\t\t\t\t\t\t\t\tcandidate: event.candidate.candidate,\r\n\t\t\t\t\t\t\t\tsdpMid: event.candidate.sdpMid,\r\n\t\t\t\t\t\t\t\tsdpMLineIndex: event.candidate.sdpMLineIndex,\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\thandleIceConnectionStateChangeEvent(event) {\r\n\t\t\t\tif (this.myPeerConnection == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"*** ICE connection state changed to \" + this.myPeerConnection.iceConnectionState, event);\r\n\t\t\t\tif (event.target == this.myPeerConnection) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"*** ICE connection state changed to \",\r\n\t\t\t\t\t\tevent.target.iceConnectionState\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tswitch (this.myPeerConnection.iceConnectionState) {\r\n\t\t\t\t\t\tcase \"closed\":\r\n\t\t\t\t\t\t\tthis.handleRelease();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"failed\":\r\n\t\t\t\t\t\tcase \"disconnected\":\r\n\t\t\t\t\t\t\tif (this.RTCPeerConnectionCreated == true) {\r\n\t\t\t\t\t\t\t\tthis.handleLeave();\r\n\t\t\t\t\t\t\t\tthis.sendDisconnect();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"connected\":\r\n\t\t\t\t\t\t\tthis.videoplay();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleIceGatheringStateChangeEvent(event) {\r\n\t\t\t\tif (this.myPeerConnection == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.target == this.myPeerConnection) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"*** ICE gathering state changed to: \" +\r\n\t\t\t\t\t\tevent.target.iceGatheringState\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSignalingStateChangeEvent(event) {\r\n\t\t\t\tif (this.myPeerConnection == null) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (event.target == this.myPeerConnection) {\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\"*** WebRTC signaling state changed to: \" +\r\n\t\t\t\t\t\tevent.target.signalingState\r\n\t\t\t\t\t);\r\n\t\t\t\t\tswitch (this.myPeerConnection.signalingState) {\r\n\t\t\t\t\t\tcase \"closed\":\r\n\t\t\t\t\t\t\tthis.handleLeave();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleDataChannelOnOpen() {\r\n\t\t\t\tconsole.log(\"handleDataChannelOnOpen\");\r\n\t\t\t\tif (this.myDataChannel) {\r\n\t\t\t\t\tthis.myDataChannel.send(\r\n\t\t\t\t\t\tJSON.stringify({\r\n\t\t\t\t\t\t\ttitle: \"siren\",\r\n\t\t\t\t\t\t\tsequence: 0,\r\n\t\t\t\t\t\t\tpayload: {\r\n\t\t\t\t\t\t\t\talarm_audio: true,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleDataChannelOnClose(event) {\r\n\t\t\t\tconsole.log(\"handleDataChannelOnClose \", event);\r\n\t\t\t},\r\n\t\t\thandleDataChannelOnMessage(message) {\r\n\t\t\t\tconsole.log(\"handleDataChannelOnMessage \", message);\r\n\t\t\t\tvar json;\r\n\t\t\t\tjson = JSON.parse(message.data);\r\n\t\t\t\tif (json.type === \"__file\") {\r\n\t\t\t\t\tconsole.log(\"handleDataChannelOnClose recive message data\", json.data);\r\n\t\t\t\t} else if (json.type === \"__msg\") {\r\n\t\t\t\t\tconsole.log(\"handleDataChannelOnClose recive message data\", json.data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"handleDataChannelOnClose recive message data\", json.data);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleDataChannelOnError(err) {\r\n\t\t\t\tconsole.log(\"handleDataChannelOnError \", err);\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tif (this.socketTask && this.socketTask.close) {\r\n\t\t\t\t\tthis.socketTask.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnewGuid() {\r\n\t\t\t\tlet s4 = function() {\r\n\t\t\t\t\treturn ((65536 * (1 + Math.random())) | 0).toString(16).substring(1);\r\n\t\t\t\t};\r\n\t\t\t\treturn (\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\t\"-\" +\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\t\"-4\" +\r\n\t\t\t\t\ts4().substr(0, 3) +\r\n\t\t\t\t\t\"-\" +\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\t\"-\" +\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\ts4() +\r\n\t\t\t\t\ts4()\r\n\t\t\t\t).toUpperCase();\r\n\t\t\t},\r\n\t\t\tstreamHandler(mystream) {\r\n\t\t\t\tthis.CheckedgetUserMedia = true;\r\n\t\t\t\t//window.localStream = mystream;\r\n\t\t\t\tthis.stream = mystream;\r\n\t\t\t\tconsole.log(\"streamHandler  stream = \", this.stream);\r\n\t\t\t\tif (\"getTracks\" in mystream) {\r\n\t\t\t\t\t// console.log(\"streamHandler getTracks\");\r\n\t\t\t\t\tif (mystream != null) {\r\n\t\t\t\t\t\tmystream.getTracks().forEach((track) => {\r\n\t\t\t\t\t\t\t// console.log(\"streamHandler getTracks \", track);\r\n\r\n\t\t\t\t\t\t\tif (track.kind === \"audio\") {\r\n\t\t\t\t\t\t\t\tthis.wpvideocall();\r\n\t\t\t\t\t\t\t\tthis.IsLocalAudioTrack = true;\r\n\t\t\t\t\t\t\t} else if (track.kind === \"video\") {\r\n\t\t\t\t\t\t\t\tif (this.$store.state.ability < 1) {\r\n\t\t\t\t\t\t\t\t\ttrack.stop(); // 关闭摄像头\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.IsLocalVideoTrack = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.StartCalled == false && this.IsWebSocketCreateed == true) {\r\n\t\t\t\t\t//console.log(\"streamHandler  start call\");\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terrorHandler(error) {\r\n\t\t\t\tconsole.log(\"errorHandler\", error);\r\n\t\t\t\tthis.CheckedgetUserMedia = true;\r\n\t\t\t\tif (this.StartCalled == false && this.IsWebSocketCreateed == true) {\r\n\t\t\t\t\t//console.log(\"streamHandler  start call\");\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tvideoplay() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif (this.videoplaying == false) {\r\n\t\t\t\t\tthis.videoplaying = true;\r\n\t\t\t\t\tvar playPromise = this.remoteVideo.play();\r\n\t\t\t\t\tif (playPromise) {\r\n\t\t\t\t\t\tplayPromise\r\n\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\tthat.videoplaying = true;\r\n\t\t\t\t\t\t\t\tconsole.log(\"<video>  play\");\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\tthat.videoplaying = false;\r\n\t\t\t\t\t\t\t\tconsole.log(\"<video> play error\", e.message);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tOnVideoPlay() {\r\n\t\t\t\tconsole.log(\"<video> event OnVideoPlay------\");\r\n\t\t\t},\r\n\t\t\tOnVideoLoadedMetaData() {\r\n\t\t\t\tconsole.log(\"<video> event OnVideoLoadedMetaData----------------\");\r\n\t\t\t\tthis.videoplay();\r\n\t\t\t},\r\n\t\t\tOnVideoCanPlay() {\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"<video>  OnVideoCanPlay-----videoWidth = \" +\r\n\t\t\t\t\tthis.remoteVideo.videoWidth\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"<video>  OnVideoCanPlay-----videoHeight = \" +\r\n\t\t\t\t\tthis.remoteVideo.videoHeight\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"<documentElement>  OnVideoCanPlay------clientWidth = \" +\r\n\t\t\t\t\tdocument.documentElement.clientWidth\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\t\"<documentElement>  OnVideoCanPlay------clientHeight = \" +\r\n\t\t\t\t\tdocument.documentElement.clientHeight\r\n\t\t\t\t);\r\n\t\t\t\tvar loading = document.getElementById(\"loading\");\r\n\t\t\t\tif (loading != null) loading.style.display = \"none\";\r\n\r\n\t\t\t\tvar canvas = document.getElementById(\"canvas\");\r\n\t\t\t\tif (canvas != null) {\r\n\t\t\t\t\tcanvas.style.width = this.remoteVideo.videoWidth;\r\n\t\t\t\t\tcanvas.style.height = this.remoteVideo.videoHeight;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar Videos = document.getElementById(\"videos\");\r\n\t\t\t\tif (Videos != null) {\r\n\t\t\t\t\tVideos.style.width = \"100%\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.$store.state.ability < 1) {\r\n\t\t\t\t\tVideos.style.display = \"none\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar temheight =\r\n\t\t\t\t\t(document.documentElement.clientWidth * this.remoteVideo.videoHeight) /\r\n\t\t\t\t\tthis.remoteVideo.videoWidth;\r\n\t\t\t\tif (temheight > document.documentElement.clientHeight) {\r\n\t\t\t\t\tif (this.isIos) {\r\n\t\t\t\t\t\t//Videos.style.height= Math.floor(document.documentElement.clientWidth*this.remoteVideo.videoHeight/this.remoteVideo.videoWidth)+\"px\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//Videos.style.height= Math.floor(document.documentElement.clientHeight)+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Videos.style.height= Math.floor(document.documentElement.clientWidth*this.remoteVideo.videoHeight/this.remoteVideo.videoWidth)+\"px\";\r\n\t\t\t\t}\r\n\t\t\t\tif (Videos != null) {\r\n\t\t\t\t\tconsole.log(\"<video>----------------height \" + Videos.style.height);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.remoteVideo.muted == true) {\r\n\t\t\t\t\tif (this.isIos == false) {\r\n\t\t\t\t\t\tthis.remoteVideo.muted = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(\"<video>----------------muted = true\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"<video>----------------muted = false\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tOnVideoError() {\r\n\t\t\t\tconsole.log(\"<video> event OnVideoError----------------\");\r\n\t\t\t},\r\n\t\t\tOnVideoLoadedData() {\r\n\t\t\t\tconsole.log(\"<video> event OnVideoLoadedData----------------\");\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\tarticle {\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex-wrap: nowrap;\r\n\t\talign-content: center;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.divhead {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vw;\r\n\r\n\t}\r\n\r\n\t.divcontrol {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #202023;\r\n\t}\r\n\r\n\t.divcontxt p {\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.divctrl {\r\n\t\twidth: 100%;\r\n\t\t/* Safari */\r\n\t\t-webkit-flex-direction: row;\r\n\t\t/* Safari 6.1+ */\r\n\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: nowrap;\r\n\t\talign-content: center;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\r\n\t.imgbutton {\r\n\t\tmargin: 0px 5px 5px 0px;\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t}\r\n\r\n\t.imgbutton1 {\r\n\t\tmargin: 0px 5px 5px 0px;\r\n\t\twidth: 45px;\r\n\t\theight: 45px;\r\n\t}\r\n\r\n\t.imgbt {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.wpbutton {\r\n\t\tmargin: 5px 5px 5px 5px;\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\ttext-align: center;\r\n\t\tcolor: #ccc;\r\n\t}\r\n\r\n\t.arc {\r\n\t\t--width: 100%;\r\n\t\t--height: 100%;\r\n\t\tposition: absolute;\r\n\t\tmargin: auto;\r\n\t\tleft: calc(var(--width) / 2 - 25px);\r\n\t\ttop: calc(var(--height) / 2 - 25px);\r\n\t\twidth: 50px;\r\n\t\theight: 50px;\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 2px solid #ffea29;\r\n\t\tborder-left: 1px solid transparent;\r\n\t\tborder-right: 1px solid transparent;\r\n\t\tanimation: rt 2s infinite linear;\r\n\t}\r\n\r\n\t.arc::before {\r\n\t\tposition: absolute;\r\n\t\tmargin: auto;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\twidth: 35px;\r\n\t\theight: 35px;\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: 2px solid #8d29ff;\r\n\t\tborder-left: 1px solid transparent;\r\n\t\tborder-right: 1px solid transparent;\r\n\t\tanimation: rt 4s infinite linear reverse;\r\n\t\tcontent: \"\";\r\n\t}\r\n\r\n\t.arc::after {\r\n\t\tposition: absolute;\r\n\t\tmargin: auto;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tborder-radius: 50%;\r\n\t\tborder-top: initial;\r\n\t\tborder-left: initial;\r\n\t\tborder-right: initial;\r\n\t\tanimation: cw 1s infinite;\r\n\t\tcontent: \"\";\r\n\t\tbackground: snow;\r\n\t}\r\n\r\n\t@keyframes rt {\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes cw {\r\n\t\t0% {\r\n\t\t\twidth: 0;\r\n\t\t\theight: 0;\r\n\t\t}\r\n\r\n\t\t75% {\r\n\t\t\twidth: 20px;\r\n\t\t\theight: 20px;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\twidth: 0;\r\n\t\t\theight: 0;\r\n\t\t}\r\n\t}\r\n\r\n\t.scale {\r\n\t\tbackground: #ddd;\r\n\t\twidth: 100%;\r\n\t\theight: 3px;\r\n\t\tposition: relative;\r\n\t\tmargin: 0px 0px 0px 0px;\r\n\t}\r\n\r\n\t.scale span {\r\n\t\tbackground: #aaa;\r\n\t\twidth: 8px;\r\n\t\theight: 16px;\r\n\t\tposition: absolute;\r\n\t\tleft: -2px;\r\n\t\ttop: -6px;\r\n\t\tcursor: pointer;\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\r\n\t.scale div {\r\n\t\tbackground: #66d9ef;\r\n\t\tposition: absolute;\r\n\t\theight: 3px;\r\n\t\twidth: 0;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n\r\n\tvideo {\r\n\t\tmargin: 0px 0px 0px 0px;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #fff;\r\n\t\tbackground-color: #202023;\r\n\t\tobject-fit: fill;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tmuted: \"true\";\r\n\t\tpreload: \"auto\";\r\n\t\tautoplay: \"autoplay\";\r\n\t\tx-webkit-airplay: \"true\";\r\n\t\tplaysinline: \"true\";\r\n\t\tcontrols: \"false\";\r\n\t\twebkit-playsinline: \"true\";\r\n\t\tx5-video-player-type: \"h5\";\r\n\t\tx5-video-player-fullscreen: \"true\";\r\n\t\tx5-video-orientation: \"portraint\";\r\n\t}\r\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=d86a38dc&scoped=true&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelloWorld.vue?vue&type=style&index=0&id=d86a38dc&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d86a38dc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"keyboard-wrapper\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":_vm.imgsrclogo}}),(!this.$store.state.isclose)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowdiv),expression:\"isShowdiv\"}],attrs:{\"id\":\"showdiv\"}},[_c('p',[_c('b',[_vm._v(_vm._s(_vm.initstate))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.NUM),expression:\"NUM\"}],attrs:{\"id\":\"telinput\",\"type\":\"text\",\"onfocus\":\"this.blur()\",\"placeholder\":\"输入房间号(单元号+房号如0808/010808)或电话\"},domProps:{\"value\":(_vm.NUM)},on:{\"focus\":function($event){_vm.show = true},\"input\":function($event){if($event.target.composing){ return; }_vm.NUM=$event.target.value}}}),_c('div',{staticClass:\"keyboard\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasmanage),expression:\"hasmanage\"}],staticClass:\"callmanage\",attrs:{\"id\":\"manageto\"},on:{\"click\":_vm.callmanege}},[_vm._v(\"呼叫物业\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowSelect),expression:\"!isShowSelect\"}],staticClass:\"num\",attrs:{\"id\":\"keybd\"}},[_c('table',[_c('tr',[_c('td',{class:[_vm.active === 1 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(1)},\"touchstart\":function($event){return _vm.msDown(1)},\"touchend\":function($event){return _vm.msUp(1)}}},[_vm._v(\" 1 \")]),_c('td',{class:[_vm.active === 2 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(2)},\"touchstart\":function($event){return _vm.msDown(2)},\"touchend\":function($event){return _vm.msUp(2)}}},[_vm._v(\" 2 \")]),_c('td',{class:[_vm.active === 3 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(3)},\"touchstart\":function($event){return _vm.msDown(3)},\"touchend\":function($event){return _vm.msUp(3)}}},[_vm._v(\" 3 \")])]),_c('tr',[_c('td',{class:[_vm.active === 4 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(4)},\"touchstart\":function($event){return _vm.msDown(4)},\"touchend\":function($event){return _vm.msUp(4)}}},[_vm._v(\" 4 \")]),_c('td',{class:[_vm.active === 5 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(5)},\"touchstart\":function($event){return _vm.msDown(5)},\"touchend\":function($event){return _vm.msUp(5)}}},[_vm._v(\" 5 \")]),_c('td',{class:[_vm.active === 6 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(6)},\"touchstart\":function($event){return _vm.msDown(6)},\"touchend\":function($event){return _vm.msUp(6)}}},[_vm._v(\" 6 \")])]),_c('tr',[_c('td',{class:[_vm.active === 7 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(7)},\"touchstart\":function($event){return _vm.msDown(7)},\"touchend\":function($event){return _vm.msUp(7)}}},[_vm._v(\" 7 \")]),_c('td',{class:[_vm.active === 8 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(8)},\"touchstart\":function($event){return _vm.msDown(8)},\"touchend\":function($event){return _vm.msUp(8)}}},[_vm._v(\" 8 \")]),_c('td',{class:[_vm.active === 9 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(9)},\"touchstart\":function($event){return _vm.msDown(9)},\"touchend\":function($event){return _vm.msUp(9)}}},[_vm._v(\" 9 \")])]),_c('tr',[_c('td',{staticClass:\"del\",on:{\"click\":_vm.del}},[_vm._v(\"←\")]),_c('td',{class:[_vm.active === 0 ? 'active' : ''],on:{\"click\":function($event){return _vm.change(0)},\"touchstart\":function($event){return _vm.msDown(0)},\"touchend\":function($event){return _vm.msUp(0)}}},[_vm._v(\" 0 \")]),_c('td',{staticClass:\"comfirm\",attrs:{\"id\":\"comfirm\"},on:{\"click\":_vm.comfirm}},[_vm._v(\"确定\")])])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowSelect),expression:\"isShowSelect\"}],staticClass:\"selectperson\"},[_c('h3',{staticClass:\"F7\"},[_vm._v(\"请选择呼叫对象\")]),_c('div',{staticClass:\"por\"},[_c('div',{staticClass:\"selectBox\",staticStyle:{\"width\":\"100%\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.unitModel),expression:\"unitModel\"}],attrs:{\"type\":\"hidden\",\"name\":\"unit\"},domProps:{\"value\":(_vm.unitModel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.unitModel=$event.target.value}}}),_c('div',{staticClass:\"selectBox_list\"},_vm._l((_vm.dataList),function(item,index){return _c('div',{key:index,staticClass:\"selectBox_listLi\",on:{\"click\":function($event){$event.stopPropagation();return _vm.select(item, index)}}},[_vm._v(_vm._s(item.realName)+\"(\"+_vm._s(item.encryptPhone)+\") \")])}),0)])])])]),_c('div',{staticClass:\"okto\",attrs:{\"id\":\"okto\"},on:{\"click\":_vm.comfirm}},[_vm._v(\"呼叫\")])]):_vm._e(),(this.$store.state.isclose)?_c('div',{staticClass:\"showclose\"},[_c('center',[_c('br'),_c('p',[_c('b',{staticStyle:{\"color\":\"green\"}},[_vm._v(\"呼叫通话已结束\")])]),_c('br'),(this.$store.state.actype==3)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isShowdiv),expression:\"!isShowdiv\"}]},[_c('p',[_vm._v(\"关注小程序“小乐开门“\")]),_c('p',[_vm._v(\"苹果手机建议使用App:\"),_c('a',{attrs:{\"href\":\"https://www.yhxaiot.com/downapp.html\"}},[_c('span',[_vm._v(\"下载App\")])])]),_c('br'),_c('p',[_vm._v(\"使用“小乐开门”小程序或App重新扫码进行设备绑定！\")])]):_vm._e()])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 转载或引用请注明来源：\r\n 作者：谢宝新\r\n 电话：13902658317 \r\n 授权深圳--科技有限公司使用\r\n -->\r\n<template>\r\n\t<div class=\"keyboard-wrapper\">\r\n\r\n\t\t<img class=\"logo\" :src=\"imgsrclogo\" />\r\n\t\t<div id='showdiv' v-if=\"!this.$store.state.isclose\" v-show=\"isShowdiv\">\r\n\t\t\t<p><b>{{ initstate }}</b></p>\r\n\r\n\t\t\t<input id=\"telinput\" type=\"text\" v-model=\"NUM\" @focus=\"show = true\" onfocus=\"this.blur()\"\r\n\t\t\t\tplaceholder=\"输入房间号(单元号+房号如0808/010808)或电话\" />\r\n\r\n\r\n\t\t\t<div class=\"keyboard\">\r\n\t\t\t\t<div class=\"callmanage\" id='manageto' v-show=\"hasmanage\" @click=\"callmanege\">呼叫物业</div>\r\n\r\n\t\t\t\t<div class=\"num\" id=\"keybd\" v-show=\"!isShowSelect\">\r\n\t\t\t\t\t<table>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td @click=\"change(1)\" :class=\"[active === 1 ? 'active' : '']\" @touchstart=\"msDown(1)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(1)\">\r\n\t\t\t\t\t\t\t\t1\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(2)\" :class=\"[active === 2 ? 'active' : '']\" @touchstart=\"msDown(2)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(2)\">\r\n\t\t\t\t\t\t\t\t2\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(3)\" :class=\"[active === 3 ? 'active' : '']\" @touchstart=\"msDown(3)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(3)\">\r\n\t\t\t\t\t\t\t\t3\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td @click=\"change(4)\" :class=\"[active === 4 ? 'active' : '']\" @touchstart=\"msDown(4)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(4)\">\r\n\t\t\t\t\t\t\t\t4\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(5)\" :class=\"[active === 5 ? 'active' : '']\" @touchstart=\"msDown(5)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(5)\">\r\n\t\t\t\t\t\t\t\t5\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(6)\" :class=\"[active === 6 ? 'active' : '']\" @touchstart=\"msDown(6)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(6)\">\r\n\t\t\t\t\t\t\t\t6\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td @click=\"change(7)\" :class=\"[active === 7 ? 'active' : '']\" @touchstart=\"msDown(7)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(7)\">\r\n\t\t\t\t\t\t\t\t7\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(8)\" :class=\"[active === 8 ? 'active' : '']\" @touchstart=\"msDown(8)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(8)\">\r\n\t\t\t\t\t\t\t\t8\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(9)\" :class=\"[active === 9 ? 'active' : '']\" @touchstart=\"msDown(9)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(9)\">\r\n\t\t\t\t\t\t\t\t9\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td class=\"del\" @click=\"del\">&larr;</td>\r\n\t\t\t\t\t\t\t<td @click=\"change(0)\" :class=\"[active === 0 ? 'active' : '']\" @touchstart=\"msDown(0)\"\r\n\t\t\t\t\t\t\t\t@touchend=\"msUp(0)\">\r\n\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t<td id=\"comfirm\" class=\"comfirm\" @click=\"comfirm\">确定</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"selectperson\" v-show=\"isShowSelect\">\r\n\t\t\t\t\t<h3 class=\"F7\">请选择呼叫对象</h3>\r\n\t\t\t\t\t<div class=\"por\">\r\n\t\t\t\t\t\t<div class=\"selectBox\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"unit\" v-model=\"unitModel\">\r\n\t\t\t\t\t\t\t<div class=\"selectBox_list\">\r\n\t\t\t\t\t\t\t\t<div class=\"selectBox_listLi\" v-for=\"(item, index) in dataList\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"select(item, index)\">{{item.realName}}({{item.encryptPhone}})\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"okto\" id='okto' @click=\"comfirm\">呼叫</div>\r\n\t\t</div>\r\n\r\n\t\t<div class='showclose' v-if=\"this.$store.state.isclose\">\r\n\t\t\t<center>\r\n\t\t\t\t<br />\r\n\t\t\t\t<p><b style=\"color: green\">呼叫通话已结束</b></p>\r\n\t\t\t\t<br />\r\n\t\t\t\t<div v-if=\"this.$store.state.actype==3\" v-show=\"!isShowdiv\">\r\n\t\t\t\t\t<!-- <img class=\"xcxlogo\" :src=\"imgxcxlogo\" /> -->\n\t\t\t\t\t<p>关注小程序“小乐开门“</p>\r\n\t\t\t\t\t<p>苹果手机建议使用App:<a href=\"https://www.yhxaiot.com/downapp.html\"><span>下载App</span></a></p>\r\n\t\t\t\t\t<br />\n\t\t\t\t\t<p>使用“小乐开门”小程序或App重新扫码进行设备绑定！</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- \r\n\t\t\t\t<br>\r\n\t\t\t\t<p>商务请联系：</p>\r\n\t\t\t\t<p>1，手机：18589040950</p>\r\n\t\t\t\t<p>2，微信：Li18988757477</p>\r\n\t\t\t\t<p>3，微信手机同号：13531703369</p>\r\n -->\r\n\t\t\t</center>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport imga_logo from \"../assets/logo.png\";\r\n\timport imgxcx_logo from \"../assets/xcxlogo.jpg\";\r\n\tconst axios = require(\"axios\");\r\n\r\n\texport default {\r\n\t\tname: \"Start\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timgsrclogo: imga_logo,\r\n\t\t\t\timgxcxlogo: imgxcx_logo,\r\n\t\t\t\tactive: null,\r\n\t\t\t\tshow: false,\r\n\t\t\t\tNUM: \"\",\r\n\t\t\t\tresult: [],\r\n\t\t\t\tdeviceid: \"\",\r\n\t\t\t\tisShowSelect: false,\r\n\t\t\t\tisShowdiv: false,\r\n\t\t\t\thasmanage: false,\r\n\t\t\t\tmanagephone: '',\r\n\t\t\t\ttalkTime: 1,\r\n\t\t\t\tdataList: [],\r\n\t\t\t\tunitName: '请选择对象'\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tnum: function() {\r\n\t\t\t\treturn this.result.join(\"\");\r\n\t\t\t},\r\n\t\t\tinitstate() {\r\n\t\t\t\treturn this.$store.state.callinfo.doorname;\r\n\t\t\t},\r\n\r\n\t\t},\r\n\t\tcreated() {\r\n\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tif (this.$store.state.isclose)\r\n\t\t\t\treturn false;\r\n\t\t\tvar devid = this.getQueryString(\"v\");\r\n\t\t\tif (devid == null || devid == \"\") {\r\n\t\t\t\talert(\"设备参数错误\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.deviceid = devid;\r\n\r\n\t\t\tvar toability = this.getQueryString(\"ability\");\r\n\t\t\tif (toability != null && toability >= 0) {\r\n\t\t\t\tthis.$store.state.ability = toability;\r\n\t\t\t}\r\n\t\t\tvar doorname = this.getQueryString(\"doorname\");\r\n\t\t\tif (doorname != null) {\r\n\t\t\t\tdoorname = decodeURI(this.getQueryVariable(\"doorname\"));\r\n\t\t\t\tdocument.title = doorname;\r\n\t\t\t\tthis.$store.state.callinfo.doorname = doorname;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setOnekeycall(this.getQueryString(\"to\"));\r\n\r\n\t\t\t// if (devid !='') {\r\n\t\t\t//this.getToken(this.getunitinfo);\r\n\t\t\tthis.getunitinfo();\r\n\r\n\t\t\t// }\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tmsDown(v) {\r\n\t\t\t\tthis.active = v;\r\n\t\t\t},\r\n\t\t\tmsUp(v) {\r\n\t\t\t\tthis.active = \"\";\r\n\t\t\t\tconsole.log(v);\r\n\t\t\t},\r\n\t\t\tstopInput() {\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tchange(val) {\r\n\t\t\t\tif (this.result.length === 0 && val === \".\") {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.result.push(val);\r\n\t\t\t\t\tthis.NUM = this.result.join(\"\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdel() {\r\n\t\t\t\tthis.result.pop();\r\n\t\t\t\tthis.NUM = this.result.join(\"\");\r\n\t\t\t\tthis.$emit(\"del\", this.NUM);\r\n\t\t\t},\r\n\t\t\tgetQueryString(name) {\r\n\t\t\t\tvar reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n\t\t\t\tvar reg_rewrite = new RegExp(\"(^|/)\" + name + \"/([^/]*)(/|$)\", \"i\");\r\n\t\t\t\tvar r = window.location.search.substr(1).match(reg);\r\n\t\t\t\tvar q = window.location.pathname.substr(1).match(reg_rewrite);\r\n\t\t\t\tif (r != null) {\r\n\t\t\t\t\treturn unescape(r[2]);\r\n\t\t\t\t} else if (q != null) {\r\n\t\t\t\t\treturn unescape(q[2]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetQueryVariable(variable) {\r\n\t\t\t\tvar query = window.location.search.substring(1);\r\n\t\t\t\tvar vars = query.split(\"&\");\r\n\t\t\t\tfor (var i = 0; i < vars.length; i++) {\r\n\t\t\t\t\tvar pair = vars[i].split(\"=\");\r\n\t\t\t\t\tif (pair[0] == variable) {\r\n\t\t\t\t\t\treturn pair[1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tasync getToken(backfun) {\r\n\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\tusername: \"admin\",\r\n\t\t\t\t\tpassword: \"yhx2023!\"\r\n\t\t\t\t};\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\turl: \"/login\", //\"get-appid\",\r\n\t\t\t\t\t\tbaseURL: this.$store.state.callinfo.remoteurl,\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\"\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\tdata: param,\r\n\t\t\t\t\t\tparams: param,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(\"get-token\", res.data);\r\n\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\tthis.$store.state.accesstoken = res.data.token;\r\n\t\t\t\t\t\t\tconsole.log(\"--token\", this.$store.state.accesstoken);\r\n\t\t\t\t\t\t\treturn backfun();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(res.data.msg);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetunitinfo() {\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\tet: this.deviceid\r\n\t\t\t\t};\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\t\turl: \"/wechat/init\", //\"get-appid\",\r\n\t\t\t\t\t\tbaseURL: this.$store.state.callinfo.remoteurl,\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\ttoken: this.$store.state.accesstoken\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\tdata: param,\r\n\t\t\t\t\t\tparams: param,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(\"get-appid\", res.data);\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t \"retCode\": 200,\r\n\t\t\t\t\t\t    \"message\": \"操作成功\",\r\n\t\t\t\t\t\t    \"data\": {\r\n\t\t\t\t\t\t        \"server\": \"rtcsv.yhxaiot.com\",\r\n\t\t\t\t\t\t        \"companyId\": \"1\",\r\n\t\t\t\t\t\t        \"baseurl\": \"https://call.yhxaiot.com/community/\",\r\n\t\t\t\t\t\t        \"ets\": \"865328069938032\",\r\n\t\t\t\t\t\t        \"ne\": \"1栋1单元测试1\",\r\n\t\t\t\t\t\t        \"sign\": \"签名待定，后续的接口都带上签名验证，防止恶意访问\",\r\n\t\t\t\t\t\t        \"logo\": \"https://call.yhxaiot.com/logo/wl.png\",\r\n\t\t\t\t\t\t        \"id\": 1,\r\n\t\t\t\t\t\t        \"audio\": 1,\r\n\t\t\t\t\t\t        \"video\": 1,\r\n\t\t\t\t\t\t        \"confine\": 2,\r\n\t\t\t\t\t\t        \"useType\": 1\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tif (res.data.retCode == 200) {\r\n\r\n\t\t\t\t\t\t\tvar doorname = res.data.data.ne;\r\n\t\t\t\t\t\t\tdocument.title = doorname;\r\n\t\t\t\t\t\t\tthis.$store.state.callinfo.doorname = doorname;\r\n\r\n\t\t\t\t\t\t\tthis.$store.state.talkTime = res.data.data.confine;\r\n\r\n\t\t\t\t\t\t\t// var appid = res.data.data.companyId;\r\n\t\t\t\t\t\t\tif (res.data.data.logo != '') {\r\n\t\t\t\t\t\t\t\tthis.imgsrclogo = res.data.data.logo + \"?r=10\";\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.$store.state.deviceId = this.deviceid;\r\n\t\t\t\t\t\t\tif (res.data.data.ets != '') {\r\n\t\t\t\t\t\t\t\tthis.device_id = res.data.data.ets;\r\n\t\t\t\t\t\t\t\tthis.$store.state.deviceId = this.device_id;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (res.data.data.server != '') {\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.server = res.data.data.server;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (res.data.data.baseurl != '') {\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.remoteurl = res.data.data.baseurl;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data.data.useType != '') {\r\n\t\t\t\t\t\t\t\tthis.$store.state.actype = res.data.data.useType;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data.data.status != null && res.data.data.status != 1) {\r\n\t\t\t\t\t\t\t\talert('设备未授权，请使用小程序或app扫码激活！');\r\n\t\t\t\t\t\t\t\tthis.$store.state.isclose = true;\r\n\t\t\t\t\t\t\t\treturn this.showerrodiv(1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data.data.phone != '') {\r\n\t\t\t\t\t\t\t\tthis.setOnekeycall(res.data.data.phone);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (res.data.data.manage != null && res.data.data.manage.phone != '') {\r\n\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.roomtel = '管理中心';\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.doorname = '管理中心';\r\n\t\t\t\t\t\t\t\tthis.hasmanage = true;\r\n\t\t\t\t\t\t\t\tthis.managephone = res.data.data.manage.phone;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\treturn this.showerrodiv();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.isShowdiv = true;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcomfirm() {\r\n\r\n\t\t\t\tvar dvkey = this.getQueryString(\"key\");\r\n\t\t\t\tif (dvkey != null && dvkey != '') {\r\n\r\n\t\t\t\t\tthis.$store.state.callinfo.meid = dvkey;\r\n\t\t\t\t\tthis.$store.state.callinfo.doorname = '测试单元 ';\r\n\r\n\t\t\t\t\t// var testphone = '13531703369';\r\n\t\t\t\t\t// this.$store.state.callinfo.roomtel = testphone;\r\n\t\t\t\t\t// this.$store.state.callinfo.phone = testphone;\r\n\t\t\t\t\t// this.$store.state.callinfo.peerid = testphone;\r\n\t\t\t\t\t// this.$store.state.login = true;\r\n\t\t\t\t\t// return;\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (this.NUM == \"\") return;\r\n\r\n\t\t\t\tif (this.$store.state.isclose) {\r\n\t\t\t\t\talert(\"呼叫已关闭，请重新扫码进入！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tvar mobreg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;\r\n\t\t\t\tvar rmreg = /^(?:\\d{4}|\\d{6}|\\d{8})$/;\r\n\t\t\t\tif (this.NUM.length == 3 || this.NUM.length == 5 || this.NUM.length == 7)\r\n\t\t\t\t\tthis.NUM = \"0\" + this.NUM;\r\n\r\n\t\t\t\tif (mobreg.test(this.NUM) || rmreg.test(this.NUM)) {\r\n\t\t\t\t\tthis.$emit(\"comfirm\", this.NUM);\r\n\t\t\t\t\tthis.show = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(\"输入非法\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar confirmbt = document.getElementById(\"comfirm\");\r\n\t\t\t\tconfirmbt.style.display = 'none';\r\n\r\n\t\t\t\tvar param = {\r\n\t\t\t\t\tet: this.$store.state.deviceId,\r\n\t\t\t\t\tnumber: this.NUM,\r\n\t\t\t\t};\r\n\t\t\t\taxios({\r\n\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\turl: \"/wechat/table\", //\"phone-call-list\",\r\n\t\t\t\t\t\tbaseURL: this.$store.state.callinfo.remoteurl,\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t\"token\": this.$store.state.accesstoken\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\tdata: param,\r\n\t\t\t\t\t\tparams: param,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tconsole.log(\"phone-call return\", param, res.data);\r\n\t\t\t\t\t\tif (res.data.retCode == 200) {\r\n\t\t\t\t\t\t\tthis.$store.state.callinfo.meid = res.data.data.licence;\r\n\r\n\t\t\t\t\t\t\tthis.$store.state.callinfo.roomtel = this.NUM;\r\n\r\n\t\t\t\t\t\t\tif (res.data.data.phoneList != '' && res.data.data.phoneList != null) {\r\n\t\t\t\t\t\t\t\tthis.isShowSelect = true;\r\n\t\t\t\t\t\t\t\tthis.dataList = res.data.data.phoneList;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.phone = res.data.data.phone;\r\n\t\t\t\t\t\t\t\tthis.$store.state.callinfo.peerid = res.data.data.phone;\r\n\t\t\t\t\t\t\t\tthis.$store.state.login = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (res.data.retCode == 400) {\r\n\t\t\t\t\t\t\talert(res.data.message);\r\n\t\t\t\t\t\t\treturn this.showerrodiv();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcallmanege() {\r\n\t\t\t\tthis.NUM = this.managephone;\r\n\t\t\t\tthis.setOnekeycall(this.managephone);\r\n\t\t\t\tthis.comfirm();\r\n\t\t\t\tthis.$store.state.callinfo.roomtel = '物业';\r\n\t\t\t\tthis.$store.state.callinfo.doorname = '物业';\r\n\t\t\t},\r\n\t\t\tselect(item, index) {\r\n\t\t\t\tthis.isShowSelect = false;\r\n\t\t\t\tvar tphone = this.dataList[index].phone;\n\t\t\t\tvar deviceLicence = this.dataList[index].phone;\n\t\t\t\tif(this.dataList[index].deviceLicence!='' && this.dataList[index].deviceLicence!=null || this.dataList[index].deviceLicence!=undefined)\n\t\t\t\t\tdeviceLicence = this.dataList[index].deviceLicence;\r\n\r\n\t\t\t\tthis.unitModel = index;\r\n\t\t\t\tthis.unitName = tphone;\r\n\r\n\t\t\t\tthis.$store.state.callinfo.phone = tphone;\r\n\t\t\t\tthis.$store.state.callinfo.peerid = deviceLicence;\r\n\r\n\t\t\t\tthis.$store.state.login = true;\r\n\t\t\t},\r\n\t\t\tsetOnekeycall(tonum) {\r\n\t\t\t\tif (tonum != null && tonum >= 0) {\r\n\t\t\t\t\tvar keybd = document.getElementById(\"keybd\");\r\n\t\t\t\t\tvar telinnode = document.getElementById(\"telinput\");\r\n\t\t\t\t\tvar okto = document.getElementById(\"okto\");\r\n\r\n\t\t\t\t\tif (telinnode != null)\r\n\t\t\t\t\t\ttelinnode.style.display = 'none';\r\n\t\t\t\t\tif (keybd != null)\r\n\t\t\t\t\t\tkeybd.style.display = 'none';\r\n\r\n\t\t\t\t\tokto.style.display = 'block';\r\n\t\t\t\t\tthis.NUM = tonum;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowerrodiv(atl) {\r\n\t\t\t\tvar keybd = document.getElementById(\"keybd\");\r\n\t\t\t\tvar telinnode = document.getElementById(\"telinput\");\r\n\r\n\t\t\t\ttelinnode.style.display = 'none';\r\n\t\t\t\tkeybd.style.display = 'none';\r\n\r\n\t\t\t\tif (atl == 1) {\r\n\t\t\t\t\tthis.imgsrclogo = imga_logo;\r\n\t\t\t\t\tthis.isShowdiv = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n\t.logo {\r\n\t\twidth: 20vw;\r\n\t\theight: 20vw;\r\n\t\tmargin-top: 80px;\r\n\t}\r\n\r\n\t.xcxlogo {\r\n\t\twidth: 50vw;\r\n\t\theight: 50vw;\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t.selectBox_list {\r\n\t\theight: 380px;\r\n\t\twidth: 100%;\r\n\t\toverflow-y: scroll;\r\n\t\tdisplay: block;\r\n\t\tbackground-color: #ddd;\r\n\t}\r\n\r\n\t.selectBox_listLi {\r\n\t\tmargin: 8px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 60px;\r\n\t\tbackground-color: #ee6a46;\r\n\t\tcolor: #eee;\r\n\t\tborder-radius: 8px;\r\n\t\tborder: 1px solid gold\r\n\t}\r\n\r\n\t.selectBox_listLi:active {\r\n\t\tbackground-color: gold;\r\n\t}\r\n\r\n\t.keyboard-wrapper {\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #fff;\r\n\t\tuser-select: none;\r\n\r\n\t\tinput {\r\n\t\t\theight: 50px;\r\n\t\t\tfont-size: 25px;\r\n\t\t\tmargin: 1% 1%;\r\n\t\t}\r\n\r\n\r\n\t\t.teldiv {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-wrap: nowrap;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t}\r\n\r\n\r\n\t\t.keyboard {\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 0;\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t.num {\r\n\t\t\t\ttable {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder: 1px solid #eee;\r\n\t\t\t\t\tborder-collapse: collapse;\r\n\t\t\t\t\tbackground: #eee;\r\n\r\n\t\t\t\t\ttd {\r\n\t\t\t\t\t\theight: 60px;\r\n\t\t\t\t\t\twidth: 30%;\r\n\t\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\t\tborder: 1px solid #ccc;\r\n\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttd.active {\r\n\t\t\t\t\t\tbackground: #ccc;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.del {\r\n\t\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.comfirm {\r\n\t\t\t\t\t\tfont-size: 16px;\r\n\t\t\t\t\t\twidth: 80px;\r\n\t\t\t\t\t\tbackground: #118eeb;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t.okto {\r\n\t\t\tposition: fixed;\r\n\t\t\tdisplay: none;\r\n\t\t\theight: 20vw;\r\n\t\t\twidth: 20vw;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tborder: 1px solid #ffeb3b;\r\n\t\t\tbackground-color: #ee6a46;\r\n\t\t\tbottom: 5vh;\r\n\t\t\tleft: 40vw;\r\n\t\t\tcolor: white;\r\n\t\t\tline-height: 20vw;\r\n\t\t\tfont-weight: 600;\r\n\t\t}\r\n\r\n\t\t.callmanage {\r\n\t\t\twidth: 30vw;\r\n\t\t\t// border-radius: 2vw;\r\n\t\t\t// border: 1px solid #ffeb3b;\r\n\t\t\t// background-color: #ee6a46;\r\n\t\t\t// color: #fff;\r\n\t\t\tcolor: #118eeb;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tpadding: 3vw;\r\n\t\t\tmargin: auto;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start_call.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start_call.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Start_call.vue?vue&type=template&id=77d002ca&scoped=true&\"\nimport script from \"./Start_call.vue?vue&type=script&lang=js&\"\nexport * from \"./Start_call.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Start_call.vue?vue&type=style&index=0&id=77d002ca&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"77d002ca\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div id=\"app\">\r\n\t\t<HelloWorld msg=\"Welcome to WanLuo call App\" v-if=\"listenshow\" />\r\n\t\t<Start msg='login' v-else />\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\n\t\r\n\timport HelloWorld from './components/HelloWorld.vue'\r\n\timport Start from './components/Start_call.vue'\r\n\r\n\texport default {\r\n\t\tname: 'App',\r\n\t\tcomponents: {\r\n\t\t\tHelloWorld,\r\n\t\t\tStart\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshow: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tlistenshow() {\r\n\t\t\t\treturn this.$store.state.login;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#app {\r\n\t\tfont-family: Avenir, Helvetica, Arial, sans-serif;\r\n\t\t-webkit-font-smoothing: antialiased;\r\n\t\t-moz-osx-font-smoothing: grayscale;\r\n\t\ttext-align: center;\r\n\t\tcolor: #2c3e50;\r\n\t\tmargin: -8px -8px -8px -8px;\n\t\tbackground-color:#202023;\n\t\theight: 100vh;;\r\n\t}\r\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=95b7a716&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuex from 'vuex';\n\nVue.use(Vuex);\n\nconst store = new Vuex.Store({\n  state: {\n\taccesstoken:'eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6IjMwMTdjOWYyLWIyZDUtNDg2Zi05YTM1LTdlMTM4MzRkNjUyMCJ9.YMlUHqyLW6wXHzdk4kQ4Pu4gl-THXUCnmkXocVfbuzl3SujL7I6XFj8NbcXcGWZ1sreBoMbvevnXhfdFZ3O2wA',\n    \n    deviceId: '0',// 设备id，以供全局使用\n\tability: 1, //0音频1视频\n\tactype:2,//1单呼2单控3多呼控\n\tlogin:false,// 是否验证，开关\n\tisclose:false,\n\tstatename:'准备',\n\troomtel:'',\n    callinfo: { \n\t\tmeid: '', \n\t\tpeerid: '',\n\t\tserver:'rtcsv.yhxaiot.com',\n\t\tdoorname:'',\n\t\tphone:'',\n\t\tremoteurl:\"https://call.yhxaiot.com/community\"\n\t\t}\n  },\n});\n\nexport default store;","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport store from './store'\r\n\r\n// import vConsole from 'vconsole'\r\nVue.config.productionTip = false\r\n// Vue.prototype.$vConsole = new vConsole()\r\n\n\r\nnew Vue({\r\n\tel: '#app',\r\n\tstore,\r\n\trender: h => h(App),\r\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"static/img/hangup.31ab348b.png\";","module.exports = __webpack_public_path__ + \"static/img/ic_video_unlock_land.c56b7fdb.png\";","module.exports = __webpack_public_path__ + \"static/img/xcxlogo.93f01924.jpg\";","module.exports = __webpack_public_path__ + \"static/img/ic_video_stop.849dd6c5.png\";","module.exports = __webpack_public_path__ + \"static/img/ic_video_record.a97f9d4a.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Start_call.vue?vue&type=style&index=0&id=77d002ca&lang=less&scoped=true&\"","module.exports = __webpack_public_path__ + \"static/img/ic_video_stop_land.c4a06951.png\";","module.exports = __webpack_public_path__ + \"static/img/logo.fc03c209.png\";","module.exports = __webpack_public_path__ + \"static/img/ic_video_unlock.7251968c.png\";"],"sourceRoot":""}