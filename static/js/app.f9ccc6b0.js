!function(b){function e(a){for(var e,g,i=a[0],l=a[1],c=a[2],m=0,h=[];m<i.length;m++)g=i[m],Object.prototype.hasOwnProperty.call(j,g)&&j[g]&&h.push(j[g][0]),j[g]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(b[e]=l[e]);for(d&&d(a);h.length;)h.shift()();return k.push.apply(k,c||[]),f()}function f(){for(var a,b=0;b<k.length;b++){for(var d,c=k[b],e=!0,f=1;f<c.length;f++)d=c[f],0!==j[d]&&(e=!1);e&&(k.splice(b--,1),a=g(g.s=c[0]))}return a}function g(a){if(h[a])return h[a].exports;var c=h[a]={i:a,l:!1,exports:{}};return b[a].call(c.exports,c,c.exports,g),c.l=!0,c.exports}var h={},j={app:0},k=[];g.m=b,g.c=h,g.d=function(a,b,c){g.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:c})},g.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},g.t=function(a,b){if(1&b&&(a=g(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;var c=Object.create(null);if(g.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(var d in a)g.d(c,d,function(b){return a[b]}.bind(null,d));return c},g.n=function(a){var b=a&&a.__esModule?function(){return a.default}:function(){return a};return g.d(b,"a",b),b},g.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},g.p="";var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var d=i;k.push([0,"chunk-vendors"]),f()}({0:function(a,b,c){a.exports=c("56d7")},"034f":function(a,b,c){"use strict";c("85ec")},2842:function(a,b,c){a.exports=c.p+"static/img/ic_video_photo.e8920b9c.png"},"2aff":function(a,b,c){"use strict";c("6367")},"4e29":function(a){a.exports="data:image/png;base64,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"},"56d7":function(j,e,q){"use strict";var z=Math.floor;q.r(e),q("e260"),q("e6cf"),q("cca6"),q("a79d");var i=q("a026"),s=(q("2b3d"),q("2842")),n=q.n(s),a=q("c5d3"),o=q.n(a),r=q("4e29"),c=q.n(r),d=q("a92e"),l=q.n(d),h=q("ce44"),t=q.n(h),m=q("cf7d"),p=q.n(m),u=q("5883"),v=q.n(u);const g=q("bc3a");var f={name:"HelloWorld",props:{msg:String},data:()=>({imgsrcscan:n.a,imgsrcrecord:o.a,imgsrcspeek:t.a,imgsrcaudio:p.a,IsLocalDataChannel:!0,isAndroid:!1,isIos:!1,isChrome:!1,isWeixin:!1,websock:null,showVideo:!0,connected:!1,connecting:!1,videoplaying:!1,socketTask:!1,startRecive:!1,StartCalled:!1,CheckedgetUserMedia:!1,IsWebSocketCreateed:!1,IsWebSocketConnecting:!1,IsWebSocketOpened:!1,IsLocalAudioTrack:!1,IsLocalVideoTrack:!1,IsSystemAudioDeviceOK:!1,IsFailCreate:!1,recorded:!1,speak:!1,mute:!1,myPeerConnection:null,myDataChannel:null,stream:null,remoteMediaStream:null,mediaRecorder:null,remoteVideo:null,heartCheck:null,messagecallback:null,RTCPeerConnectionCreated:!1,peerid:"",meid:"",device_id:"",calltime:null,sessionId:"",wsurl:"",url:"",mymsg:!1,roomId:"",IsReconnect:!1,timeout:2e3,timedelay:0,serverTimeoutObj:null,canAddIceCandidate:!1,IceCandidate:[],connectmode:"live",connectsource:"MainStream",configuration:{iceServers:[{urls:["stun:webrtc.qq-kan.com:3478?transport=udp"]}]},ifHaveVideo:!0}),created(){this.ifHaveVideo=this.$store.state.callinfo.isvideo,this.calltime=this.getQueryString("time");var a=this.getQueryString("topeer");if(null!=a){this.peerid=a,this.sessionId=this.newGuid();var b=this.getQueryString("mypeer");if(null!=b){this.meid=b;var c=this.getQueryString("device_id");null!=c&&(this.device_id=c),this.checktimesign()&&(this.initWebSocket(),this.NewgetUserMedia({video:1==this.$store.state.ability,audio:!0},this.streamHandler,this.errorHandler),this.timerstart())}else alert("\u53C2\u6570\u9519\u8BEF")}else alert("\u76EE\u6807\u9519\u8BEF")},mounted(){var b=document.getElementById("videos"),c=document.getElementById("canvas"),d=document.getElementById("loading");c.style.display="none",document.title="WebRTC-\u8BBE\u5907\u7AEF";var e=this.getQueryString("doorname");null!=e&&(document.title=e);var f=window.navigator.userAgent;null!=f&&(this.isAndroid=-1<f.indexOf("Android")||-1<f.indexOf("Linux"),this.isIos=!!f.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),this.isChrome=-1!==f.indexOf("Chrome"),this.isWeixin=-1!=f.indexOf("micromessenger")),this.isIos||this.isAndroid?(b.style.width="100%",d.style.left=z(document.documentElement.clientWidth/2-25)+"px",d.style.top=z(9*document.documentElement.clientWidth/16/2-25)+"px"):(b.style.width="100%",z(9*document.documentElement.clientWidth/16),document.documentElement.clientHeight,d.style.left=z(document.documentElement.clientWidth/2-25)+"px"),d.style.top="45vh",this.remoteVideo=document.getElementById("remoteVideo"),null!=this.remoteVideo&&(this.remoteVideo.muted=!0,this.remoteVideo.addEventListener("playing",this.OnVideoPlaying),this.remoteVideo.addEventListener("play",this.OnVideoPlay),this.remoteVideo.addEventListener("loadedmetadata",this.OnVideoLoadedMetaData),this.remoteVideo.addEventListener("canplay",this.OnVideoCanPlay),this.remoteVideo.addEventListener("error",this.OnVideoError),this.remoteVideo.addEventListener("loadeddata",this.OnVideoLoadedData),1==this.isWeixin&&0==this.isIos||(1==this.isWeixin&&1==this.isIos?document.addEventListener("WeixinJSBridgeReady",function(){var a=this;if(0==this.videoplaying){this.videoplaying=!0;var b=this.remoteVideo.play();b&&b.then(()=>{a.videoplaying=!0}).catch(()=>{a.videoplaying=!1})}},!1):1==this.isChrome&&this.isIos));let g=this;window.onresize=()=>{g.pageResize()}},computed:{initstate(){return this.$store.state.statename}},destroyed(){window.onresize=null,null!=this.websock&&this.websock.close(),null==this.stream&&this.$store.state.isclose||this.hangup()},methods:{getQueryVariable(a){for(var b,c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++)if(b=c[d].split("="),b[0]==a)return b[1];return!1},hangup(){this.PostMessage("handup"),this.PostMessage("hangup"),this.$store.state.login=!1,this.$store.state.isclose=!0,this.posesynclose(),this.sendDisconnect(),this.handleLeave(),this.timerreset(),this.close(),null!=this.stream&&(this.stream.getTracks().forEach((a)=>{a.stop()}),window.localStream=null,this.stream=null),null!=this.websock&&(this.websock.close(),this.websock=null)},posesynclose(){var a={cmd:"hangup",session:this.sessionId,licence:this.meid,phone:this.peerid,et:this.device_id,ty:1};null!=this.stream&&g({method:"post",url:"wechat/sync",baseURL:this.$store.state.callinfo.remoteurl,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",token:this.$store.state.accesstoken},data:a,params:a}).then(()=>{}).catch(()=>{})},wpvideocall(){var a={licence:this.$store.state.callinfo.meid,phone:this.$store.state.callinfo.phone,et:this.$store.state.deviceId,sessionId:this.sessionId};g({method:"post",url:"/wechat/confirm",baseURL:this.$store.state.callinfo.remoteurl,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",token:this.$store.state.accesstoken},data:a,params:a}).then((a)=>{if(200==a.data.retCode){var b=this,c=document.getElementById("calltimer");b.$store.state.statename="\u547C\u53EB\u4E2D";var d=60*b.$store.state.talkTime;if(0<d)var e=setInterval(function(){d--,b.$store.state.isclose?clearInterval(e):0>=d?(clearInterval(e),b.$store.state.statename="\u547C\u53EB\u5931\u8D25",b.hangup()):c.innerHTML=d+"\u79D2\u540E\u7ED3\u675F"},1e3)}else alert(a.data.message)}).catch(()=>{})},checktimesign(){var a=new Date().valueOf();return!(null==this.calltime||45e3<a-+this.calltime)},webrtcrecord(){1==this.videoplaying?this.recorded?(this.stoprecord(),this.imgsrcrecord=o.a):(this.startrecord(),this.imgsrcrecord=c.a):this.imgsrcrecord=o.a},setlocalspeak(){if(null!=this.myPeerConnection){this.speak=!this.speak,this.imgsrcspeek=1==this.speak?l.a:t.a,null!=this.remoteVideo&&1==this.remoteVideo.muted&&(this.remoteVideo.muted=!1);var a=this;this.myPeerConnection.getReceivers().forEach(function(b){null!=b.track&&"audio"===b.track.kind&&(b.track.enabled=a.speak)})}},setlocalaudio(){if(null!=this.myPeerConnection){this.mute=!this.mute,this.imgsrcaudio=1==this.mute?v.a:p.a;var a=this;this.myPeerConnection.getSenders().forEach(function(b){null!=b.track&&"audio"===b.track.kind&&(b.track.enabled=a.mute)})}},startrecord(){var b=this;null!=this.remoteMediaStream&&(this.mediaRecorder=new MediaRecorder(this.remoteMediaStream),null!=this.mediaRecorder&&(this.recorded=!0,this.mediaRecorder.blobs=[],this.mediaRecorder.ondataavailable=function(a){b.mediaRecorder.blobs.push(a.data)},this.mediaRecorder.onstop=function(c){if("stop"==c.type&&b.mediaRecorder.blobs.length){var d=new Blob(b.mediaRecorder.blobs,{type:b.mediaRecorder.mimeType}),e=window.URL.createObjectURL(d),f=document.createElement("a");f.style.display="none",f.href=e,f.download=new Date().valueOf()+"a.webm";var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(g),URL.revokeObjectURL(e)}},this.mediaRecorder.start()))},stoprecord(){1==this.recorded&&null!=this.remoteMediaStream&&null!=this.mediaRecorder&&(this.mediaRecorder.stop(),this.recorded=!1)},scanpicture(){if(1==this.videoplaying){var a=document.getElementById("canvas"),b=document.getElementById("remoteVideo");a.getContext("2d").drawImage(b,0,0,a.width,a.height),a.toDataURL("image/png")}},AndroidSaveVideoFile(a){window.AndroidWebView.SaveVideoFile(a)},pageResize(){var a=document.getElementById("videos"),b=document.getElementById("loading");this.isIos||this.isAndroid?(a.style.width="100%",b.style.left=z(document.documentElement.clientWidth/2-25)+"px"):(a.style.width="100%",z(9*document.documentElement.clientWidth/16)>document.documentElement.clientHeight-60?(b.style.left=z(document.documentElement.clientWidth/2-25)+"px",b.style.top=z(a.style.height/2-25)+"px"):(b.style.left=z(document.documentElement.clientWidth/2-25)+"px",b.style.top=z(9*document.documentElement.clientWidth/16/2-25)+"px")),b.style.top="45vh"},timerreset(){clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj)},timerstart(){var a=this;this.serverTimeoutObj=setInterval(function(){a.timedelay++,a.websock&&1===a.websock.readyState?(1==a.IsReconnect?(1==a.RTCPeerConnectionCreated&&a.handleLeave(),a.StartCalled=!1,a.sessionId=a.newGuid()):30<a.timedelay&&(a.timedelay=0,a.sendToServer({eventName:"__ping",data:{sessionId:a.sessionId,sessionType:"IE",messageId:a.newGuid(),from:a.meid,to:a.peerid}})),a.timerreset(),a.timerstart()):0==a.IsWebSocketConnecting&&(null!=a.websock&&(a.websock.close(),a.websock=null),1==a.RTCPeerConnectionCreated&&a.handleLeave(),a.initWebSocket())},this.timeout)},initWebSocket(){if(this.$store.state.login&&""!=this.$store.state.callinfo.meid&&1!=this.IsWebSocketConnecting){var a="https:"==document.location.protocol;this.IsWebSocketConnecting=!0;var b,c=this.getQueryString("server");null!=c&&""!=c||(c="rtcsv.yhxaiot.com"),b="localhost:8080"==c||""==c?a?"wss://webrtc.qq-kan.com/wsequipment/"+this.meid:"ws://webrtc.qq-kan.com/wsequipment/"+this.meid:a?"wss://"+c+"/wsequipment/"+this.meid:"ws://"+c+"/wsequipment/"+this.meid,null!=this.websock&&(this.websock.close(),this.websock=null),this.websock=new WebSocket(b),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose}},websocketonopen(){var a=this;this.IsWebSocketOpened=!0,null!=this.websock&&1===this.websock.readyState?this.StartCalled=!1:setTimeout(()=>{null!=a.websock&&1===a.websock.readyState&&(a.StartCalled=!1)},100)},websocketonerror(){this.IsWebSocketOpened=!1,this.IsWebSocketConnecting=!1,this.websock=null},websocketonmessage(a){const b=JSON.parse(a.data);switch(b.eventName){case"_call":this.handleCall(b.data);break;case"_create":this.handleCreate(b.data);break;case"_answer":this.$store.state.statename="\u63A5\u901A\u4E2D\u2026\u2026",this.handleAnswner(b.data);break;case"_offer":this.$store.state.statename="\u63A5\u901A\u4E2D\u2026\u2026",this.handleOffer(b.data);break;case"_ice_candidate":this.handleCandidate(b.data);break;case"_session_disconnected":case"_disconnected":this.$store.state.statename="\u6302\u673A",this.hangup();break;case"_post_message":this.handlePostMessage(b.data);break;case"_connectinfo":case"_connectto":this.handleConnectInfo(b.data);break;case"_session_failed":this.handleSessionFailed(b.data);}},websocketsend(a){null!=this.websock&&1===this.websock.readyState&&this.websock.send(a)},websocketclose(){this.IsWebSocketOpened=!1,this.IsWebSocketConnecting=!1,this.websock=null},getQueryString(a){return"server"===a?this.$store.state.callinfo.server:"mypeer"===a?this.$store.state.callinfo.meid:"topeer"===a?this.$store.state.callinfo.peerid:"doorname"===a?this.$store.state.callinfo.doorname:"device_id"===a?this.$store.state.deviceId:"time"===a?new Date().valueOf():""},NewgetUserMedia(a,b,c){window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia?window.navigator.mediaDevices.getUserMedia(a).then(b).catch(c):window.navigator.webkitGetUserMedia?window.navigator.webkitGetUserMedia(a).then(b).catch(c):window.navigator.mozGetUserMedia?window.navagator.mozGetUserMedia(a).then(b).catch(c):window.navigator.getUserMedia?window.navigator.getUserMedia(a).then(b).catch(c):window.navigator.msGetUserMedia?window.navigator.msGetUserMedia(a).then(b).catch(c):(this.CheckedgetUserMedia=!1,this.IsLocalAudioTrack=!1)},Connect(){this.sendToServer({eventName:"__connectto",data:{sessionId:this.sessionId,sessionType:"IE",messageId:this.newGuid(),from:this.meid,to:this.peerid}})},handleDisconnect(a){a.sessionId==this.sessionId&&1==this.RTCPeerConnectionCreated&&this.handleLeave()},sendToServer(a){this.websocketsend(JSON.stringify(a))},PostMessage(a,b){if(1==this.connected){var c=this.newGuid();this.messagecallback=b,this.sendToServer({eventName:"__post_message",data:{sessionId:this.sessionId,sessionType:"IE",messageId:c,to:this.peerid,from:this.meid,message:a}})}},handlePostMessage(a){(void 0===this.messagecallback||null===this.messagecallback||("function"==typeof this.messagecallback&&this.messagecallback(a.message),this.messagecallback=null),"callon"==a.message&&(this.$store.state.statename="\u901A\u8BDD\u4E2D",this.mute=!0,this.setlocalspeak()),"openDoor"==a.message)&&(this.$store.state.statename="\u901A\u8BDD\u4E2D",this.mute=!0,this.setlocalspeak(),document.getElementById("myWebview").contentWindow.postMessage({type:"callMethod",method:"sendBLEOpen"}))},handleSessionFailed(a){a.sessionId==this.sessionId&&(1==this.RTCPeerConnectionCreated&&(this.handleLeave(),this.sendDisconnect()),this.sessionId=this.newGuid())},handleCreate(a){("online"===a.state||"sleep"===a.state)&&(this.IsWebSocketCreateed=!0,null===a.iceServers&&void 0===a.iceServers&&""===a.iceServers||(a.iceServers.constructor===Object?this.configuration=JSON.parse(JSON.stringify(a.iceServers)):this.configuration=JSON.parse(a.iceServers)),1==this.CheckedgetUserMedia&&0==this.StartCalled&&this.Call())},Call(){this.StartCalled=!0,this.IsLocalDataChannel,this.IsLocalAudioTrack,this.IsLocalVideoTrack},handleConnectInfo(){this.sendToServer({eventName:"__pong",data:{sessionId:this.sessionId,sessionType:"IE",messageId:this.newGuid(),from:this.meid,to:this.peerid}})},handleLeave(){var a=this;null!=this.myDataChannel&&(this.myDataChannel.close(),this.myDataChannel.onopen=null,this.myDataChannel.onclose=null,this.myDataChannel.onmessage=null,this.myDataChannel.onerror=null,this.myDataChannel=null),null!=this.myPeerConnection&&("closed"==this.myPeerConnection.signalingState?this.handleRelease():(this.myPeerConnection.getSenders().forEach((b)=>{a.myPeerConnection.removeTrack(b)}),this.myPeerConnection.close(),setTimeout(()=>{null!=a.myPeerConnection&&"closed"==a.myPeerConnection.signalingState&&a.handleRelease()},100))),this.videoplaying=!1,this.RTCPeerConnectionCreated=!1,this.StartCalled=!1,this.IceCandidate.splice(0,this.IceCandidate.length)},handleRelease(){null!=this.myPeerConnection&&(this.myPeerConnection.onicecandidate=null,this.myPeerConnection.onaddstream=null,this.myPeerConnection.ontrack=null,this.myPeerConnection.onsignalingstatechange=null,this.myPeerConnection.onicegatheringstatechange=null,this.myPeerConnection=null),0==this.IsFailCreate&&(this.IsReconnect=!0),window.localStream=null,this.stream=null},async handleAnswner(a){var b=this,c=new(window.mozRTCSessionDescription||window.RTCSessionDescription)({type:"answer",sdp:a.sdp});await this.myPeerConnection.setRemoteDescription(c).then(function(){b.canAddIceCandidate=!0,b.IceCandidate.forEach((a)=>{var c=new RTCIceCandidate({sdpMLineIndex:a.sdpMLineIndex,candidate:a.candidate});b.myPeerConnection.addIceCandidate(c)}),b.IceCandidate.splice(0,b.IceCandidate.length)},function(){})},async handleOffer(a){this.IsReconnect=!1;var b=this;if(this.sessionId=a.sessionId,null===a.iceservers&&void 0===a.iceservers&&""===a.iceservers||(this.configuration=JSON.parse(a.iceservers)),0==this.RTCPeerConnectionCreated&&this.initPeerConnection(),0==this.RTCPeerConnectionCreated)this.sendDisconnect(),this.IsReconnect=!1,this.IsFailCreate=!0;else{var c=new(window.mozRTCSessionDescription||window.RTCSessionDescription)({type:"offer",sdp:a.sdp});await this.myPeerConnection.setRemoteDescription(c).then(function(){b.canAddIceCandidate=!0,b.IceCandidate.forEach((a)=>{var c=new RTCIceCandidate({sdpMLineIndex:a.sdpMLineIndex,candidate:a.candidate});b.myPeerConnection.addIceCandidate(c)}),b.IceCandidate.splice(0,b.IceCandidate.length)},function(){}),this.Call(),this.$store.state.statename="\u901A\u8BDD\u4E2D",this.mute=!0,this.setlocalspeak(),await this.myPeerConnection.createAnswer().then(function(c){b.myPeerConnection.setLocalDescription(c),b.sendToServer({eventName:"__answer",data:{sessionId:a.sessionId,sessionType:"IE",messageId:b.newGuid(),from:a.to,to:a.from,type:c.type,sdp:c.sdp}})}).catch(function(){b.sendDisconnect(),b.IsReconnect=!0,this.IsFailCreate=!0})}},async handleCall(a){this.IsReconnect=!1;var b=this;this.sessionId=a.sessionId,null===a.iceservers&&void 0===a.iceservers&&""===a.iceservers||(this.configuration=JSON.parse(a.iceservers)),0==this.RTCPeerConnectionCreated&&this.initPeerConnection(),0==this.RTCPeerConnectionCreated?(this.sendDisconnect(),this.IsReconnect=!1,this.IsFailCreate=!0):await this.myPeerConnection.createOffer().then(function(c){b.myPeerConnection.setLocalDescription(c).then(function(){b.sendToServer({eventName:"__offer",data:{sessionId:b.sessionId,sessionType:"IE",messageId:b.newGuid(),from:b.meid,to:b.peerid,type:c.type,sdp:c.sdp,mode:"live",source:"MainStream",datachannel:"true",audio:"sendrecv",video:"sendrecv",user:"admin",pwd:"123456",iceservers:a.iceServers}})},function(){})}).catch(function(){b.sendDisconnect(),b.IsReconnect=!0,this.IsFailCreate=!0})},sendDisconnect(){this.sendToServer({eventName:"__disconnected",data:{sessionId:this.sessionId,sessionType:"IE",messageId:this.newGuid(),from:this.meid,to:this.peerid}})},async handleCandidate(a){var b={};try{b=JSON.parse(a.candidate)}catch(c){b={candidate:a.candidate,sdpMLineIndex:a.label,sdpMid:a.label}}if(null!=this.myPeerConnection&&1==this.RTCPeerConnectionCreated&&1==this.canAddIceCandidate){var c=new RTCIceCandidate({sdpMLineIndex:b.sdpMLineIndex,candidate:b.candidate});await this.myPeerConnection.addIceCandidate(c).then(function(){},function(){})}else this.IceCandidate.push(b)},initPeerConnection(){try{if(this.myPeerConnection=new RTCPeerConnection(this.configuration),null!=this.myPeerConnection){if("addTrack"in this.myPeerConnection?null!=this.stream&&this.stream.getTracks().forEach((a)=>{this.myPeerConnection.addTrack(a,this.stream),"audio"===a.kind&&(a.enabled=!0)}):null!=this.stream&&(this.myPeerConnection.addStream(this.stream),this.stream.getTracks().forEach((a)=>{"audio"===a.kind&&(a.enabled=!0)})),"ontrack"in this.myPeerConnection?this.myPeerConnection.ontrack=this.handleRemoteTrackAdded:this.myPeerConnection.onaddstream=this.handleRemoteStreamAdded,this.myPeerConnection.onicecandidate=this.handleIceCandidate,this.myPeerConnection.oniceconnectionstatechange=this.handleIceConnectionStateChangeEvent,this.myPeerConnection.onicegatheringstatechange=this.handleIceGatheringStateChangeEvent,this.myPeerConnection.onsignalingstatechange=this.handleSignalingStateChangeEvent,1==this.IsLocalDataChannel)try{this.myDataChannel=this.myPeerConnection.createDataChannel("mydatachannel"),this.myDataChannel&&(this.myDataChannel.onopen=this.handleDataChannelOnOpen,this.myDataChannel.onclose=this.handleDataChannelOnClose,this.myDataChannel.onmessage=this.handleDataChannelOnMessage,this.myDataChannel.onerror=this.handleDataChannelOnError)}catch(a){}this.RTCPeerConnectionCreated=!0}else this.RTCPeerConnectionCreated=!1}catch(a){return void(this.RTCPeerConnectionCreated=!1)}},getObjectURL(a){var b=null;try{null==window.createObjectURL?null==window.URL?null!=window.webkitURL&&(b=window.webkitURL.createObjectURL(a)):b=window.URL.createObjectURL(a):b=window.createObjectURL(a)}catch(a){b=null}return b},handleRemoteTrackAdded(a){this.remoteMediaStream=a.streams[0],null!=this.remoteVideo&&(a.streams[0].getTracks().forEach((a)=>{if("audio"===a.kind){a.enabled=!0;const b=new(window.AudioContext||window.webkitAudioContext),c=b.createMediaStreamSource(new MediaStream([a])),d=b.createGain();d.gain.value=6,c.connect(d),d.connect(b.destination)}}),this.remoteVideo.srcObject=a.streams[0],0==this.IsSystemAudioDeviceOK&&(this.remoteVideo.muted=!1))},handleRemoteStreamAdded(a){if(this.remoteMediaStream=a.stream,null!=this.remoteVideo)if("srcObject"in this.remoteVideo)this.remoteVideo.srcObject=a.stream,a.stream.getTracks().forEach((a)=>{"audio"===a.kind&&(a.enabled=!0)});else{var b=this.getObjectURL(a.stream);this.remoteVideo.src=b,a.stream.getTracks().forEach((a)=>{"audio"===a.kind&&(a.enabled=!0)})}},handleIceCandidate(a){a.candidate&&this.sendToServer({eventName:"__ice_candidate",data:{sessionId:this.sessionId,sessionType:"IE",messageId:this.newGuid(),to:this.peerid,from:this.meid,candidate:JSON.stringify({candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex})}})},handleIceConnectionStateChangeEvent(a){if(null!=this.myPeerConnection&&a.target==this.myPeerConnection)switch(this.myPeerConnection.iceConnectionState){case"closed":this.handleRelease();break;case"failed":case"disconnected":1==this.RTCPeerConnectionCreated&&(this.handleLeave(),this.sendDisconnect());break;case"connected":this.videoplay();}},handleIceGatheringStateChangeEvent(a){null!=this.myPeerConnection&&(a.target,this.myPeerConnection)},handleSignalingStateChangeEvent(a){if(null!=this.myPeerConnection&&a.target==this.myPeerConnection)switch(this.myPeerConnection.signalingState){case"closed":this.handleLeave();}},handleDataChannelOnOpen(){this.myDataChannel&&this.myDataChannel.send(JSON.stringify({title:"siren",sequence:0,payload:{alarm_audio:!0}}))},handleDataChannelOnClose(){},handleDataChannelOnMessage(a){var b;"__file"===(b=JSON.parse(a.data)).type||b.type},handleDataChannelOnError(){},close(){this.socketTask&&this.socketTask.close&&this.socketTask.close()},newGuid(){let a=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return(a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+a()+"-"+a()+a()+a()).toUpperCase()},streamHandler(a){this.CheckedgetUserMedia=!0,this.stream=a,"getTracks"in a&&null!=a&&a.getTracks().forEach((a)=>{"audio"===a.kind?(this.wpvideocall(),this.IsLocalAudioTrack=!0):"video"===a.kind&&(1>this.$store.state.ability?a.stop():this.IsLocalVideoTrack=!0)}),0==this.StartCalled&&this.IsWebSocketCreateed},errorHandler(){this.CheckedgetUserMedia=!0,0==this.StartCalled&&this.IsWebSocketCreateed},videoplay(){var a=this;if(0==this.videoplaying){this.videoplaying=!0;var b=this.remoteVideo.play();b&&b.then(()=>{a.videoplaying=!0}).catch(()=>{a.videoplaying=!1})}},OnVideoPlay(){},OnVideoLoadedMetaData(){this.videoplay()},OnVideoCanPlay(){var a=document.getElementById("loading");null!=a&&(a.style.display="none");var b=document.getElementById("canvas");null!=b&&(b.style.width=this.remoteVideo.videoWidth,b.style.height=this.remoteVideo.videoHeight);var c=document.getElementById("videos");null!=c&&(c.style.width="100%"),1>this.$store.state.ability&&(c.style.display="none"),document.documentElement.clientWidth*this.remoteVideo.videoHeight/this.remoteVideo.videoWidth>document.documentElement.clientHeight&&this.isIos,1==this.remoteVideo.muted&&0==this.isIos&&(this.remoteVideo.muted=!1)},OnVideoError(){},OnVideoLoadedData(){}}},y=(q("2aff"),q("2877")),w=Object(y.a)(f,function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("article",[c("div",{staticClass:"divcontxt"},[c("p",[a._v(" \u547C\u53EB:"+a._s(1==this.$store.state.actype?this.$store.state.callinfo.roomtel:this.$store.state.callinfo.doorname)+" ")]),c("p",{staticStyle:{color:"red"}},[c("b",[a._v(a._s(a.initstate))])]),c("p",{attrs:{id:"calltimer"}})]),c("div",{staticClass:"divhead",attrs:{id:"videos"}},[!1===a.ifHaveVideo?c("audio",{ref:"remoteVideo",staticStyle:{"object-fit":"fill"},attrs:{id:"remoteVideo",muted:"true",preload:"auto",autoplay:"autoplay","x-webkit-airplay":"true",playsinline:"true","webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint"}}):c("video",{ref:"remoteVideo",staticStyle:{"object-fit":"fill"},attrs:{id:"remoteVideo",muted:"true",preload:"auto",autoplay:"autoplay","x-webkit-airplay":"true",playsinline:"true","webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint"},domProps:{muted:!0}}),c("div",{staticClass:"arc",attrs:{id:"loading"}}),c("canvas",{attrs:{id:"canvas"}})]),c("div",{staticClass:"divcontrol"},[c("div"),c("div",{staticClass:"divctrl"},[c("div",{staticClass:"wpbutton",on:{click:function(){return a.hangup()}}},[c("img",{staticClass:"imgbt",attrs:{src:q("57b9")}})])])])])},[],!1,null,"34f7cb80",null).exports,A=q("cf05"),b=q.n(A),k=q("8940"),B=q.n(k);const D=q("bc3a");var F={name:"Start",data:()=>({imgsrclogo:b.a,imgxcxlogo:B.a,active:null,show:!1,NUM:"",result:[],deviceid:"",isShowSelect:!1,isShowdiv:!1,hasmanage:!1,managephone:"",talkTime:1,dataList:[],unitName:"\u8BF7\u9009\u62E9\u5BF9\u8C61"}),computed:{num:function(){return this.result.join("")},initstate(){return this.$store.state.callinfo.doorname}},created(){},mounted(){if(this.$store.state.isclose)return!1;var a=this.getQueryString("v");if(null==a||""==a)return alert("\u8BBE\u5907\u53C2\u6570\u9519\u8BEF"),!1;this.deviceid=a;var b=this.getQueryString("ability");null!=b&&0<=b&&(this.$store.state.ability=b);var c=this.getQueryString("doorname");null!=c&&(c=decodeURI(this.getQueryVariable("doorname")),document.title=c,this.$store.state.callinfo.doorname=c),this.setOnekeycall(this.getQueryString("to")),this.getunitinfo()},methods:{msDown(a){this.active=a},msUp(){this.active=""},stopInput:()=>!1,change(a){return(0!==this.result.length||"."!==a)&&void(this.result.push(a),this.NUM=this.result.join(""))},del(){this.result.pop(),this.NUM=this.result.join(""),this.$emit("del",this.NUM)},getQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=new RegExp("(^|/)"+a+"/([^/]*)(/|$)","i"),d=window.location.search.substr(1).match(b),e=window.location.pathname.substr(1).match(c);return null==d?null==e?null:unescape(e[2]):unescape(d[2])},getQueryVariable(a){for(var b,c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++)if(b=c[d].split("="),b[0]==a)return b[1];return!1},async getToken(a){var b={username:"admin",password:"yhx2023!"};D({method:"post",url:"/login",baseURL:this.$store.state.callinfo.remoteurl,headers:{"Access-Control-Allow-Origin":"*"},data:b,params:b}).then((b)=>200==b.data.code?(this.$store.state.accesstoken=b.data.token,a()):void alert(b.data.msg)).catch(()=>{})},getunitinfo(){var a={et:this.deviceid};D({method:"get",url:"/wechat/init",baseURL:this.$store.state.callinfo.remoteurl,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",token:this.$store.state.accesstoken},data:a,params:a}).then((a)=>{if(200!=a.data.retCode)return alert(a.data.message),this.showerrodiv();var b=a.data.data.ne;return(document.title=b,this.$store.state.callinfo.doorname=b,this.$store.state.talkTime=a.data.data.confine,""!=a.data.data.logo&&(this.imgsrclogo=a.data.data.logo+"?r=10"),this.$store.state.deviceId=this.deviceid,""!=a.data.data.ets&&(this.device_id=a.data.data.ets,this.$store.state.deviceId=this.device_id),""!=a.data.data.server&&(this.$store.state.callinfo.server=a.data.data.server),""!=a.data.data.baseurl&&(this.$store.state.callinfo.remoteurl=a.data.data.baseurl),""!=a.data.data.useType&&(this.$store.state.actype=a.data.data.useType),null!=a.data.data.status&&1!=a.data.data.status)?(alert("\u8BBE\u5907\u672A\u6388\u6743\uFF0C\u8BF7\u4F7F\u7528\u5C0F\u7A0B\u5E8F\u6216app\u626B\u7801\u6FC0\u6D3B\uFF01"),this.$store.state.isclose=!0,this.showerrodiv(1)):void(""!=a.data.data.phone&&this.setOnekeycall(a.data.data.phone),null!=a.data.data.manage&&""!=a.data.data.manage.phone&&(this.$store.state.callinfo.roomtel="\u7BA1\u7406\u4E2D\u5FC3",this.$store.state.callinfo.doorname="\u7BA1\u7406\u4E2D\u5FC3",this.hasmanage=!0,this.managephone=a.data.data.manage.phone),this.isShowdiv=!0)}).catch(()=>{})},comfirm(){var a=this.getQueryString("key");if(null!=a&&""!=a&&(this.$store.state.callinfo.meid=a,this.$store.state.callinfo.doorname="\u6D4B\u8BD5\u5355\u5143 "),""!=this.NUM)if(this.$store.state.isclose)alert("\u547C\u53EB\u5DF2\u5173\u95ED\uFF0C\u8BF7\u91CD\u65B0\u626B\u7801\u8FDB\u5165\uFF01");else if(3!=this.NUM.length&&5!=this.NUM.length&&7!=this.NUM.length||(this.NUM="0"+this.NUM),/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.NUM)||/^(?:\d{4}|\d{6}|\d{8})$/.test(this.NUM)){this.$emit("comfirm",this.NUM),this.show=!1,document.getElementById("comfirm").style.display="none";var b={et:this.$store.state.deviceId,number:this.NUM};D({method:"post",url:"/wechat/table",baseURL:this.$store.state.callinfo.remoteurl,headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json",token:this.$store.state.accesstoken},data:b,params:b}).then((a)=>{if(200==a.data.retCode&&(this.$store.state.callinfo.meid=a.data.data.licence,this.$store.state.callinfo.roomtel=this.NUM,""!=a.data.data.phoneList&&null!=a.data.data.phoneList?(this.isShowSelect=!0,this.dataList=a.data.data.phoneList):(this.$store.state.callinfo.phone=a.data.data.phone,this.$store.state.callinfo.peerid=a.data.data.phone,this.$store.state.login=!0)),400==a.data.retCode)return alert(a.data.message),this.showerrodiv()}).catch(()=>{})}else alert("\u8F93\u5165\u975E\u6CD5")},callmanege(){this.NUM=this.managephone,this.setOnekeycall(this.managephone),this.comfirm(),this.$store.state.callinfo.roomtel="\u7269\u4E1A",this.$store.state.callinfo.doorname="\u7269\u4E1A"},select(a,b){this.isShowSelect=!1;var c=this.dataList[b].phone,d=this.dataList[b].phone;(""!=this.dataList[b].deviceLicence&&null!=this.dataList[b].deviceLicence||null!=this.dataList[b].deviceLicence)&&(d=this.dataList[b].deviceLicence),this.unitModel=b,this.unitName=c,Object.keys(this.dataList[b]).includes("isVideo")&&!1===this.dataList[b].isVideo&&(this.$store.state.callinfo.isvideo=!1),this.$store.state.callinfo.phone=c,this.$store.state.callinfo.peerid=d,this.$store.state.login=!0},setOnekeycall(a){if(null!=a&&0<=a){var b=document.getElementById("keybd"),c=document.getElementById("telinput"),d=document.getElementById("okto");null!=c&&(c.style.display="none"),null!=b&&(b.style.display="none"),d.style.display="block",this.NUM=a}},showerrodiv(a){var c=document.getElementById("keybd");document.getElementById("telinput").style.display="none",c.style.display="none",1==a&&(this.imgsrclogo=b.a,this.isShowdiv=!1)}}},G={name:"App",components:{HelloWorld:w,Start:(q("a8ff"),Object(y.a)(F,function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{staticClass:"keyboard-wrapper"},[c("img",{staticClass:"logo",attrs:{src:a.imgsrclogo}}),this.$store.state.isclose?a._e():c("div",{directives:[{name:"show",rawName:"v-show",value:a.isShowdiv,expression:"isShowdiv"}],attrs:{id:"showdiv"}},[c("p",[c("b",[a._v(a._s(a.initstate))])]),c("input",{directives:[{name:"model",rawName:"v-model",value:a.NUM,expression:"NUM"}],attrs:{id:"telinput",type:"text",onfocus:"this.blur()",placeholder:"\u8F93\u5165\u623F\u95F4\u53F7(\u5355\u5143\u53F7+\u623F\u53F7\u59820808/010808)\u6216\u7535\u8BDD"},domProps:{value:a.NUM},on:{focus:function(){a.show=!0},input:function(b){b.target.composing||(a.NUM=b.target.value)}}}),c("div",{staticClass:"keyboard"},[c("div",{directives:[{name:"show",rawName:"v-show",value:a.hasmanage,expression:"hasmanage"}],staticClass:"callmanage",attrs:{id:"manageto"},on:{click:a.callmanege}},[a._v("\u547C\u53EB\u7269\u4E1A")]),c("div",{directives:[{name:"show",rawName:"v-show",value:!a.isShowSelect,expression:"!isShowSelect"}],staticClass:"num",attrs:{id:"keybd"}},[c("table",[c("tr",[c("td",{class:[1===a.active?"active":""],on:{click:function(){return a.change(1)},touchstart:function(){return a.msDown(1)},touchend:function(){return a.msUp(1)}}},[a._v(" 1 ")]),c("td",{class:[2===a.active?"active":""],on:{click:function(){return a.change(2)},touchstart:function(){return a.msDown(2)},touchend:function(){return a.msUp(2)}}},[a._v(" 2 ")]),c("td",{class:[3===a.active?"active":""],on:{click:function(){return a.change(3)},touchstart:function(){return a.msDown(3)},touchend:function(){return a.msUp(3)}}},[a._v(" 3 ")])]),c("tr",[c("td",{class:[4===a.active?"active":""],on:{click:function(){return a.change(4)},touchstart:function(){return a.msDown(4)},touchend:function(){return a.msUp(4)}}},[a._v(" 4 ")]),c("td",{class:[5===a.active?"active":""],on:{click:function(){return a.change(5)},touchstart:function(){return a.msDown(5)},touchend:function(){return a.msUp(5)}}},[a._v(" 5 ")]),c("td",{class:[6===a.active?"active":""],on:{click:function(){return a.change(6)},touchstart:function(){return a.msDown(6)},touchend:function(){return a.msUp(6)}}},[a._v(" 6 ")])]),c("tr",[c("td",{class:[7===a.active?"active":""],on:{click:function(){return a.change(7)},touchstart:function(){return a.msDown(7)},touchend:function(){return a.msUp(7)}}},[a._v(" 7 ")]),c("td",{class:[8===a.active?"active":""],on:{click:function(){return a.change(8)},touchstart:function(){return a.msDown(8)},touchend:function(){return a.msUp(8)}}},[a._v(" 8 ")]),c("td",{class:[9===a.active?"active":""],on:{click:function(){return a.change(9)},touchstart:function(){return a.msDown(9)},touchend:function(){return a.msUp(9)}}},[a._v(" 9 ")])]),c("tr",[c("td",{staticClass:"del",on:{click:a.del}},[a._v("\u2190")]),c("td",{class:[0===a.active?"active":""],on:{click:function(){return a.change(0)},touchstart:function(){return a.msDown(0)},touchend:function(){return a.msUp(0)}}},[a._v(" 0 ")]),c("td",{staticClass:"comfirm",attrs:{id:"comfirm"},on:{click:a.comfirm}},[a._v("\u786E\u5B9A")])])])]),c("div",{directives:[{name:"show",rawName:"v-show",value:a.isShowSelect,expression:"isShowSelect"}],staticClass:"selectperson"},[c("h3",{staticClass:"F7"},[a._v("\u8BF7\u9009\u62E9\u547C\u53EB\u5BF9\u8C61")]),c("div",{staticClass:"por"},[c("div",{staticClass:"selectBox",staticStyle:{width:"100%"}},[c("input",{directives:[{name:"model",rawName:"v-model",value:a.unitModel,expression:"unitModel"}],attrs:{type:"hidden",name:"unit"},domProps:{value:a.unitModel},on:{input:function(b){b.target.composing||(a.unitModel=b.target.value)}}}),c("div",{staticClass:"selectBox_list"},a._l(a.dataList,function(b,d){return c("div",{key:d,staticClass:"selectBox_listLi",on:{click:function(c){return c.stopPropagation(),a.select(b,d)}}},[a._v(a._s(b.realName)+"("+a._s(b.encryptPhone)+") ")])}),0)])])])]),c("div",{staticClass:"okto",attrs:{id:"okto"},on:{click:a.comfirm}},[a._v("\u547C\u53EB")])]),this.$store.state.isclose?c("div",{staticClass:"showclose"},[c("center",[c("br"),c("p",[c("b",{staticStyle:{color:"green"}},[a._v("\u547C\u53EB\u901A\u8BDD\u5DF2\u7ED3\u675F")])]),c("br"),3==this.$store.state.actype?c("div",{directives:[{name:"show",rawName:"v-show",value:!a.isShowdiv,expression:"!isShowdiv"}]},[c("p",[a._v("\u5173\u6CE8\u5C0F\u7A0B\u5E8F\u201C\u5C0F\u4E50\u5F00\u95E8\u201C")]),c("p",[a._v("\u82F9\u679C\u624B\u673A\u5EFA\u8BAE\u4F7F\u7528App:"),c("a",{attrs:{href:"https://www.yhxaiot.com/downapp.html"}},[c("span",[a._v("\u4E0B\u8F7DApp")])])]),c("br"),c("p",[a._v("\u4F7F\u7528\u201C\u5C0F\u4E50\u5F00\u95E8\u201D\u5C0F\u7A0B\u5E8F\u6216App\u91CD\u65B0\u626B\u7801\u8FDB\u884C\u8BBE\u5907\u7ED1\u5B9A\uFF01")])]):a._e()])],1):a._e()])},[],!1,null,"dc8be2ca",null)).exports},data:()=>({show:!1}),computed:{listenshow(){return this.$store.state.login}}},H=(q("034f"),Object(y.a)(G,function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{attrs:{id:"app"}},[a.listenshow?c("HelloWorld",{attrs:{msg:"Welcome to WanLuo call App"}}):c("Start",{attrs:{msg:"login"}})],1)},[],!1,null,null,null)).exports,E=q("2f62");i.a.use(E.a);var x=new E.a.Store({state:{accesstoken:"eyJhbGciOiJIUzUxMiJ9.eyJsb2dpbl91c2VyX2tleSI6IjMwMTdjOWYyLWIyZDUtNDg2Zi05YTM1LTdlMTM4MzRkNjUyMCJ9.YMlUHqyLW6wXHzdk4kQ4Pu4gl-THXUCnmkXocVfbuzl3SujL7I6XFj8NbcXcGWZ1sreBoMbvevnXhfdFZ3O2wA",deviceId:"0",ability:1,actype:2,login:!1,isvideo:!0,isclose:!1,statename:"\u51C6\u5907",roomtel:"",callinfo:{meid:"",peerid:"",server:"rtcsv.yhxaiot.com",doorname:"",phone:"",remoteurl:"https://call.yhxaiot.com/community"}}});i.a.config.productionTip=!1,new i.a({el:"#app",store:x,render:(a)=>a(H)}).$mount("#app")},"57b9":function(a,b,c){a.exports=c.p+"static/img/hangup.31ab348b.png"},5883:function(a,b,c){a.exports=c.p+"static/img/ic_video_unlock_land.c56b7fdb.png"},6367:function(){},"85ec":function(){},8940:function(a,b,c){a.exports=c.p+"static/img/xcxlogo.93f01924.jpg"},a8ff:function(a,b,c){"use strict";c("db3a")},a92e:function(a,b,c){a.exports=c.p+"static/img/ic_video_stop.849dd6c5.png"},c5d3:function(a,b,c){a.exports=c.p+"static/img/ic_video_record.a97f9d4a.png"},ce44:function(a,b,c){a.exports=c.p+"static/img/ic_video_stop_land.c4a06951.png"},cf05:function(a,b,c){a.exports=c.p+"static/img/logo.fc03c209.png"},cf7d:function(a,b,c){a.exports=c.p+"static/img/ic_video_unlock.7251968c.png"},db3a:function(){}});
//# sourceMappingURL=app.f9ccc6b0.js.map